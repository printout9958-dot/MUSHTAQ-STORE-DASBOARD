<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mushtaq Store - ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .service-card:hover { transform: translateY(-5px); }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .admin-panel.hidden { display: none !important; }
        .user-panel.hidden { display: none !important; }
        .login-required { opacity: 0.6; pointer-events: none; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-store text-2xl"></i>
                    <h1 class="text-2xl font-bold">Mushtaq Store</h1>
                    <span class="text-sm bg-white/20 px-2 py-1 rounded">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</span>
                </div>
                <nav class="flex items-center space-x-4">
                    <button id="homeBtn" class="hover:bg-white/20 px-3 py-2 rounded transition">‡§π‡•ã‡§Æ</button>
                    <button id="loginBtn" class="bg-white text-purple-600 px-4 py-2 rounded font-semibold hover:bg-gray-100 transition">‡§≤‡•â‡§ó‡§ø‡§® / ‡§∏‡§æ‡§á‡§®‡§Ö‡§™</button>
                    <button id="logoutBtn" class="hidden bg-red-500 px-4 py-2 rounded font-semibold hover:bg-red-600 transition">‡§≤‡•â‡§ó‡§Ü‡§â‡§ü</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Login/Signup Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 w-96 max-w-md mx-4 max-h-[90vh] overflow-y-auto">
            <!-- Login Form -->
            <div id="loginForm">
                <h2 class="text-2xl font-bold mb-6 text-center">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§Ø‡•Ç‡§ú‡§∞ ‡§ü‡§æ‡§á‡§™</label>
                        <select id="userType" class="w-full border rounded-lg px-3 py-2">
                            <option value="user">‡§Ø‡•Ç‡§ú‡§∞</option>
                            <option value="admin">‡§è‡§°‡§Æ‡§ø‡§®</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
                        <input type="tel" id="mobile" class="w-full border rounded-lg px-3 py-2" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" maxlength="10">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°</label>
                        <input type="password" id="password" class="w-full border rounded-lg px-3 py-2" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">
                    </div>
                    <div class="flex space-x-3">
                        <button id="loginSubmit" class="flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition">‡§≤‡•â‡§ó‡§ø‡§®</button>
                        <button id="closeLogin" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                    <div class="text-center mt-4">
                        <p class="text-sm text-gray-600">‡§®‡§Ø‡§æ ‡§Ø‡•Ç‡§ú‡§∞ ‡§π‡•à‡§Ç? 
                            <button id="showSignup" class="text-purple-600 hover:text-purple-800 font-semibold">‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç</button>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="hidden">
                <h2 class="text-2xl font-bold mb-6 text-center">‡§®‡§Ø‡§æ ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *</label>
                        <input type="text" id="signupName" class="w-full border rounded-lg px-3 py-2" placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *</label>
                        <input type="tel" id="signupMobile" class="w-full border rounded-lg px-3 py-2" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" maxlength="10" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç *</label>
                        <input type="password" id="signupPassword" class="w-full border rounded-lg px-3 py-2" placeholder="‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 4 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°" minlength="4" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç *</label>
                        <input type="password" id="confirmPassword" class="w-full border rounded-lg px-3 py-2" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§à‡§Æ‡•á‡§≤ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)</label>
                        <input type="email" id="signupEmail" class="w-full border rounded-lg px-3 py-2" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ">
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <div class="flex items-start space-x-2">
                            <input type="checkbox" id="termsAgree" required class="mt-1">
                            <label for="termsAgree" class="text-xs text-blue-800">
                                ‡§Æ‡•à‡§Ç ‡§®‡§ø‡§Ø‡§Æ ‡§î‡§∞ ‡§∂‡§∞‡•ç‡§§‡•ã‡§Ç ‡§∏‡•á ‡§∏‡§π‡§Æ‡§§ ‡§π‡•Ç‡§Ç ‡§î‡§∞ ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§ï‡§ø ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§
                            </label>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="signupSubmit" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition">‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç</button>
                        <button id="cancelSignup" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                    <div class="text-center mt-4">
                        <p class="text-sm text-gray-600">‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§π‡•à? 
                            <button id="showLogin" class="text-purple-600 hover:text-purple-800 font-semibold">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Home Page -->
        <div id="homePage">
            <!-- Hero Section -->
            <div class="gradient-bg text-white rounded-lg p-8 mb-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold mb-4">‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π</h2>
                    <p class="text-lg mb-6">‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï - ‡§∏‡§≠‡•Ä ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§¨‡§®‡§µ‡§æ‡§è‡§Ç</p>
                    <div class="flex justify-center space-x-4 text-sm">
                        <span><i class="fas fa-check mr-2"></i>‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ö‡§™‡•ç‡§≤‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç</span>
                        <span><i class="fas fa-check mr-2"></i>‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç</span>
                        <span><i class="fas fa-check mr-2"></i>‡§π‡•ã‡§Æ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä</span>
                    </div>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold mb-6 text-center">‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</h3>
                <div id="servicesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Services will be loaded here -->
                </div>
            </div>

            <!-- Login Required Message -->
            <div id="loginMessage" class="text-center py-8 bg-yellow-50 rounded-lg border border-yellow-200">
                <i class="fas fa-lock text-4xl text-yellow-600 mb-4"></i>
                <h3 class="text-xl font-semibold text-yellow-800 mb-2">‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h3>
                <p class="text-yellow-700 mb-4">‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§ï‡•á ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ‡§è‡§Ç</p>
                <button class="bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700 transition" onclick="document.getElementById('loginBtn').click()">
                    ‡§Ö‡§≠‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® / ‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç
                </button>
            </div>
        </div>

        <!-- User Panel -->
        <div id="userPanel" class="user-panel">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold">‡§Ø‡•Ç‡§ú‡§∞ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</h2>
                    <p class="text-gray-600" id="welcomeMessage">‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!</p>
                </div>
                <div class="flex space-x-3">
                    <button id="syncDataBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                        <i class="fas fa-sync-alt mr-2"></i>‡§°‡•á‡§ü‡§æ ‡§∏‡§ø‡§Ç‡§ï ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button id="trackingBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                        <i class="fas fa-search mr-2"></i>‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
            </div>

            <!-- Application History -->
            <div id="applicationHistory" class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h3 class="text-xl font-bold mb-4">
                    <i class="fas fa-history mr-2 text-purple-600"></i>‡§Ü‡§™‡§ï‡•á ‡§Ü‡§µ‡•á‡§¶‡§®
                </h3>
                <div id="userApplicationsList">
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-inbox text-4xl mb-4"></i>
                        <p>‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§Ü‡§µ‡•á‡§¶‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</p>
                    </div>
                </div>
            </div>

            <!-- User Services -->
            <div id="userServices" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- User services will be loaded here -->
            </div>

            <!-- Tracking Section -->
            <div id="trackingSection" class="hidden bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
                <div class="flex space-x-4 mb-4">
                    <input type="text" id="trackingId" placeholder="‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" class="flex-1 border rounded-lg px-3 py-2">
                    <button id="trackBtn" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                        ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
                <div id="trackingResult" class="hidden">
                    <!-- Tracking results will appear here -->
                </div>
            </div>
        </div>

        <!-- Service Application Page -->
        <div id="applicationPage" class="hidden">
            <div class="flex items-center mb-6">
                <button id="backToUserPanel" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition mr-4">
                    <i class="fas fa-arrow-left mr-2"></i>‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç
                </button>
                <h2 class="text-2xl font-bold" id="applicationPageTitle">‡§∏‡•á‡§µ‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§®</h2>
            </div>

            <!-- Service Details Card -->
            <div id="serviceDetailsCard" class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <!-- Service details will be loaded here -->
            </div>

            <!-- Success Message -->
            <div id="submissionSuccess" class="hidden bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                <div class="text-center">
                    <div class="text-6xl text-green-600 mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-green-800 mb-4">üéâ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ!</h3>
                    <div id="successDetails" class="space-y-2 text-green-700 mb-4">
                        <!-- Success details will be filled here -->
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-green-300">
                        <p class="text-sm text-green-600 mb-2">
                            <i class="fas fa-info-circle mr-2"></i>‡§Ü‡§™‡§ï‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à
                        </p>
                        <p class="text-xs text-green-500">
                            <i class="fas fa-clock mr-2"></i>3 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§Ø‡•Ç‡§ú‡§∞ ‡§™‡•à‡§®‡§≤ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...
                        </p>
                    </div>
                </div>
            </div>

            <!-- Application Form -->
            <div id="applicationFormContainer" class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-6">‡§Ü‡§µ‡•á‡§¶‡§® ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡•á‡§Ç</h3>
                <form id="serviceForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *</label>
                            <input type="text" name="fullName" required class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *</label>
                            <input type="tel" name="mobile" required class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ</label>
                            <input type="text" name="fatherName" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø</label>
                            <input type="date" name="dob" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞</label>
                            <input type="text" name="aadhar" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="12 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">‡§à‡§Æ‡•á‡§≤</label>
                            <input type="email" name="email" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ *</label>
                        <textarea name="address" required class="w-full border rounded-lg px-3 py-2 h-24 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="‡§ó‡§æ‡§Ç‡§µ/‡§∂‡§π‡§∞, ‡§§‡§π‡§∏‡•Ä‡§≤, ‡§ú‡§ø‡§≤‡§æ, ‡§∞‡§æ‡§ú‡•ç‡§Ø, ‡§™‡§ø‡§® ‡§ï‡•ã‡§°"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</label>
                        <textarea name="additionalInfo" class="w-full border rounded-lg px-3 py-2 h-20 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="‡§ï‡•ã‡§à ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§Ø‡§æ ‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•Ä"></textarea>
                    </div>
                    
                    <!-- Terms and Conditions -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-start space-x-3">
                            <input type="checkbox" id="termsAccept" required class="mt-1">
                            <label for="termsAccept" class="text-sm text-gray-700">
                                ‡§Æ‡•à‡§Ç ‡§ò‡•ã‡§∑‡§£‡§æ ‡§ï‡§∞‡§§‡§æ/‡§ï‡§∞‡§§‡•Ä ‡§π‡•Ç‡§Ç ‡§ï‡§ø ‡§ä‡§™‡§∞ ‡§¶‡•Ä ‡§ó‡§à ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§§‡•ç‡§Ø ‡§π‡•à‡•§ ‡§Æ‡•à‡§Ç ‡§®‡§ø‡§Ø‡§Æ ‡§î‡§∞ ‡§∂‡§∞‡•ç‡§§‡•ã‡§Ç ‡§∏‡•á ‡§∏‡§π‡§Æ‡§§ ‡§π‡•Ç‡§Ç ‡§î‡§∞ ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§ï‡§ø ‡§ó‡§≤‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§®‡•á ‡§™‡§∞ ‡§Æ‡•á‡§∞‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§∞‡§¶‡•ç‡§¶ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
                            </label>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="submit" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition font-semibold">
                            <i class="fas fa-paper-plane mr-2"></i>‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç
                        </button>
                        <button type="button" id="cancelForm" class="bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition font-semibold">
                            <i class="fas fa-times mr-2"></i>‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="admin-panel">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤</h2>
                <div class="flex space-x-4">
                    <button id="addServiceBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                        <i class="fas fa-plus mr-2"></i>‡§∏‡•á‡§µ‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
                    </button>
                    <button id="settingsBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                        <i class="fas fa-cog mr-2"></i>‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏
                    </button>
                </div>
            </div>

            <!-- Admin Tabs - Flipkart Style -->
            <div class="bg-white rounded-lg shadow-lg">
                <div class="border-b">
                    <nav class="flex px-4 overflow-x-auto scrollbar-hide" style="scrollbar-width: none; -ms-overflow-style: none;">
                        <style>
                            .scrollbar-hide::-webkit-scrollbar { display: none; }
                            .admin-tab-flipkart {
                                min-width: 80px;
                                flex-shrink: 0;
                                transition: all 0.2s ease;
                            }
                            .admin-tab-flipkart.active {
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                color: white;
                                transform: translateY(-2px);
                                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
                            }
                            .admin-tab-flipkart:not(.active):hover {
                                background-color: #f8fafc;
                                transform: translateY(-1px);
                            }
                        </style>
                        <button class="admin-tab admin-tab-flipkart active py-3 px-4 mx-1 rounded-lg text-sm font-medium whitespace-nowrap" data-tab="services">
                            <i class="fas fa-cogs mr-2"></i>‡§∏‡•á‡§µ‡§æ‡§è‡§Ç
                        </button>
                        <button class="admin-tab admin-tab-flipkart py-3 px-4 mx-1 rounded-lg text-sm font-medium text-gray-600 whitespace-nowrap" data-tab="applications">
                            <i class="fas fa-file-alt mr-2"></i>‡§Ü‡§µ‡•á‡§¶‡§®
                        </button>
                        <button class="admin-tab admin-tab-flipkart py-3 px-4 mx-1 rounded-lg text-sm font-medium text-gray-600 whitespace-nowrap" data-tab="users">
                            <i class="fas fa-users mr-2"></i>‡§Ø‡•Ç‡§ú‡§∞‡•ç‡§∏
                        </button>
                        <button class="admin-tab admin-tab-flipkart py-3 px-4 mx-1 rounded-lg text-sm font-medium text-gray-600 whitespace-nowrap" data-tab="settings">
                            <i class="fas fa-cog mr-2"></i>‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏
                        </button>
                    </nav>
                </div>

                <!-- Services Management -->
                <div id="adminServices" class="admin-content p-6">
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="px-4 py-2 text-left">‡§∏‡•á‡§µ‡§æ ‡§®‡§æ‡§Æ</th>
                                    <th class="px-4 py-2 text-left">‡§´‡•Ä‡§∏</th>
                                    <th class="px-4 py-2 text-left">‡§∏‡§Æ‡§Ø</th>
                                    <th class="px-4 py-2 text-left">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏</th>
                                    <th class="px-4 py-2 text-left">‡§è‡§ï‡•ç‡§∂‡§®</th>
                                </tr>
                            </thead>
                            <tbody id="adminServicesTable">
                                <!-- Services will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Applications Management -->
                <div id="adminApplications" class="admin-content p-6 hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="px-4 py-2 text-left">‡§Ü‡§µ‡•á‡§¶‡§® ID</th>
                                    <th class="px-4 py-2 text-left">‡§®‡§æ‡§Æ</th>
                                    <th class="px-4 py-2 text-left">‡§∏‡•á‡§µ‡§æ</th>
                                    <th class="px-4 py-2 text-left">‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï</th>
                                    <th class="px-4 py-2 text-left">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏</th>
                                    <th class="px-4 py-2 text-left">‡§è‡§ï‡•ç‡§∂‡§®</th>
                                </tr>
                            </thead>
                            <tbody id="adminApplicationsTable">
                                <!-- Applications will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Users Management -->
                <div id="adminUsers" class="admin-content p-6 hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="px-4 py-2 text-left">‡§Ø‡•Ç‡§ú‡§∞ ID</th>
                                    <th class="px-4 py-2 text-left">‡§®‡§æ‡§Æ</th>
                                    <th class="px-4 py-2 text-left">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤</th>
                                    <th class="px-4 py-2 text-left">‡§Ü‡§µ‡•á‡§¶‡§®</th>
                                    <th class="px-4 py-2 text-left">‡§è‡§ï‡•ç‡§∂‡§®</th>
                                </tr>
                            </thead>
                            <tbody id="adminUsersTable">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Settings -->
                <div id="adminSettings" class="admin-content p-6 hidden">
                    <div class="grid grid-cols-1 gap-8">
                        <!-- Database Connection Options -->
                        <div class="bg-white border rounded-lg p-6">
                            <h4 class="text-xl font-semibold mb-6 text-center">‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™</h4>
                            
                            <!-- Database Selection -->
                            <div class="mb-6">
                                <label class="block text-sm font-medium mb-3">‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ö‡•Å‡§®‡•á‡§Ç:</label>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-blue-50 transition" data-db="sheets">
                                        <div class="text-center">
                                            <i class="fas fa-table text-3xl text-green-600 mb-2"></i>
                                            <h5 class="font-semibold">Google Sheets</h5>
                                            <p class="text-sm text-gray-600">‡§∏‡•ç‡§™‡•ç‡§∞‡•á‡§°‡§∂‡•Ä‡§ü ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏</p>
                                        </div>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-blue-50 transition" data-db="jsonbin">
                                        <div class="text-center">
                                            <i class="fas fa-database text-3xl text-blue-600 mb-2"></i>
                                            <h5 class="font-semibold">JSONBin</h5>
                                            <p class="text-sm text-gray-600">JSON ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏</p>
                                        </div>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-blue-50 transition" data-db="firebase">
                                        <div class="text-center">
                                            <i class="fas fa-fire text-3xl text-orange-600 mb-2"></i>
                                            <h5 class="font-semibold">Firebase</h5>
                                            <p class="text-sm text-gray-600">‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Google Sheets Configuration -->
                            <div id="sheetsConfig" class="database-config hidden bg-green-50 border border-green-200 rounded-lg p-6">
                                <h5 class="text-lg font-semibold mb-4 text-green-800">
                                    <i class="fas fa-table mr-2"></i>Google Sheets ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®
                                </h5>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Spreadsheet URL *</label>
                                        <input type="url" id="sheetsUrl" class="w-full border rounded-lg px-3 py-2" placeholder="https://docs.google.com/spreadsheets/d/...">
                                        <p class="text-xs text-gray-600 mt-1">‡§™‡•Ç‡§∞‡§æ Google Sheets URL ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">API Key *</label>
                                        <input type="text" id="sheetsApiKey" class="w-full border rounded-lg px-3 py-2" placeholder="Google Sheets API Key">
                                        <p class="text-xs text-gray-600 mt-1">Google Cloud Console ‡§∏‡•á API Key ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Sheet Name</label>
                                        <input type="text" id="sheetName" class="w-full border rounded-lg px-3 py-2" placeholder="Sheet1" value="Sheet1">
                                        <p class="text-xs text-gray-600 mt-1">‡§°‡•á‡§ü‡§æ ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡•Ä‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button id="testSheetsBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                            <i class="fas fa-plug mr-2"></i>‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                        <button id="saveSheetsBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                            <i class="fas fa-save mr-2"></i>‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- JSONBin Configuration -->
                            <div id="jsonbinConfig" class="database-config hidden bg-blue-50 border border-blue-200 rounded-lg p-6">
                                <h5 class="text-lg font-semibold mb-4 text-blue-800">
                                    <i class="fas fa-database mr-2"></i>JSONBin ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®
                                </h5>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">API Key *</label>
                                        <input type="text" id="jsonbinApiKey" class="w-full border rounded-lg px-3 py-2" placeholder="$2a$10$...">
                                        <p class="text-xs text-gray-600 mt-1">JSONBin.io ‡§∏‡•á API Key ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Bin ID</label>
                                        <input type="text" id="jsonbinId" class="w-full border rounded-lg px-3 py-2" placeholder="64a7b2c8b89b1e2...">
                                        <p class="text-xs text-gray-600 mt-1">‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ Bin ID (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï - ‡§®‡§Ø‡§æ Bin ‡§¨‡§®‡•á‡§ó‡§æ)</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Bin Name</label>
                                        <input type="text" id="jsonbinName" class="w-full border rounded-lg px-3 py-2" placeholder="mushtaq-store-data" value="mushtaq-store-data">
                                        <p class="text-xs text-gray-600 mt-1">‡§°‡•á‡§ü‡§æ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§ï‡•á ‡§≤‡§ø‡§è Bin ‡§ï‡§æ ‡§®‡§æ‡§Æ</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button id="testJsonbinBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                            <i class="fas fa-plug mr-2"></i>‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                        <button id="saveJsonbinBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                            <i class="fas fa-save mr-2"></i>‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Firebase Configuration -->
                            <div id="firebaseConfig" class="database-config hidden bg-orange-50 border border-orange-200 rounded-lg p-6">
                                <h5 class="text-lg font-semibold mb-4 text-orange-800">
                                    <i class="fas fa-fire mr-2"></i>Firebase ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®
                                </h5>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Project ID *</label>
                                        <input type="text" id="firebaseProjectId" class="w-full border rounded-lg px-3 py-2" placeholder="my-project-id">
                                        <p class="text-xs text-gray-600 mt-1">Firebase ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ID</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">API Key *</label>
                                        <input type="text" id="firebaseApiKey" class="w-full border rounded-lg px-3 py-2" placeholder="AIzaSy...">
                                        <p class="text-xs text-gray-600 mt-1">Firebase Web API Key</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Database URL *</label>
                                        <input type="url" id="firebaseDatabaseUrl" class="w-full border rounded-lg px-3 py-2" placeholder="https://project-id-default-rtdb.firebaseio.com/">
                                        <p class="text-xs text-gray-600 mt-1">Realtime Database URL</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Auth Domain</label>
                                        <input type="text" id="firebaseAuthDomain" class="w-full border rounded-lg px-3 py-2" placeholder="project-id.firebaseapp.com">
                                        <p class="text-xs text-gray-600 mt-1">Firebase Auth Domain</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Storage Bucket</label>
                                        <input type="text" id="firebaseStorageBucket" class="w-full border rounded-lg px-3 py-2" placeholder="project-id.appspot.com">
                                        <p class="text-xs text-gray-600 mt-1">Firebase Storage Bucket</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button id="testFirebaseBtn" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition">
                                            <i class="fas fa-plug mr-2"></i>‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                        <button id="saveFirebaseBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                            <i class="fas fa-save mr-2"></i>‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Connection Status -->
                            <div id="connectionStatus" class="mt-6 p-4 rounded-lg hidden">
                                <h6 class="font-semibold mb-2">‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏:</h6>
                                <div id="statusContent"></div>
                            </div>

                            <!-- Active Database Status -->
                            <div id="activeDatabaseStatus" class="mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg">
                                <h6 class="font-semibold mb-2 text-gray-800">
                                    <i class="fas fa-database mr-2"></i>‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø:
                                </h6>
                                <div id="databaseStatusContent" class="text-sm text-gray-600">
                                    <i class="fas fa-info-circle mr-2"></i>‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à - ‡§°‡•á‡§ü‡§æ ‡§ï‡•á‡§µ‡§≤ ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§π‡•ã‡§ó‡§æ
                                </div>
                            </div>

                            <!-- Current Configuration Display -->
                            <div id="currentConfigDisplay" class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                                <h6 class="font-semibold mb-3 text-blue-800">
                                    <i class="fas fa-cog mr-2"></i>‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§®:
                                </h6>
                                <div id="configDetails" class="space-y-3">
                                    <!-- Configuration details will be shown here -->
                                </div>
                                <div class="mt-4 flex space-x-3">
                                    <button id="testCurrentConnection" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm">
                                        <i class="fas fa-plug mr-2"></i>‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                                    </button>
                                    <button id="refreshConfig" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm">
                                        <i class="fas fa-sync-alt mr-2"></i>‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Home Page Settings -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="text-lg font-semibold mb-4">‡§π‡•ã‡§Æ ‡§™‡•á‡§ú ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§®‡§æ‡§Æ</label>
                                    <input type="text" id="storeName" value="Mushtaq Store" class="w-full border rounded-lg px-3 py-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">‡§π‡•á‡§°‡§≤‡§æ‡§á‡§®</label>
                                    <input type="text" id="headline" value="‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π" class="w-full border rounded-lg px-3 py-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§®‡§Ç‡§¨‡§∞</label>
                                    <input type="tel" id="contactNumber" class="w-full border rounded-lg px-3 py-2" placeholder="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§®‡§Ç‡§¨‡§∞">
                                </div>
                                <button id="previewChanges" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                    ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§¶‡•á‡§ñ‡•á‡§Ç
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Service Modal -->
        <div id="addServiceModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg p-8 w-96 max-w-md mx-4">
                <h3 class="text-xl font-bold mb-4">‡§®‡§à ‡§∏‡•á‡§µ‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>
                <form id="addServiceForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§∏‡•á‡§µ‡§æ ‡§®‡§æ‡§Æ</label>
                        <input type="text" name="serviceName" required class="w-full border rounded-lg px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§´‡•Ä‡§∏ (‚Çπ)</label>
                        <input type="number" name="fee" required class="w-full border rounded-lg px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§∏‡§Æ‡§Ø (‡§¶‡§ø‡§®)</label>
                        <input type="number" name="duration" required class="w-full border rounded-lg px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">‡§µ‡§ø‡§µ‡§∞‡§£</label>
                        <textarea name="description" class="w-full border rounded-lg px-3 py-2 h-20"></textarea>
                    </div>
                    <div class="flex space-x-3">
                        <button type="submit" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition">‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
                        <button type="button" id="closeAddService" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        // App State
        let currentUser = null;
        let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
        let services = [
            { id: 1, name: '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-id-card', fee: 50, duration: '7-10 ‡§¶‡§ø‡§®', description: '‡§®‡§Ø‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§µ‡§æ‡§è‡§Ç ‡§Ø‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç', active: true },
            { id: 2, name: '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-credit-card', fee: 100, duration: '15-20 ‡§¶‡§ø‡§®', description: '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç', active: true },
            { id: 3, name: '‡§µ‡•ã‡§ü‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-vote-yea', fee: 25, duration: '30-45 ‡§¶‡§ø‡§®', description: '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§µ‡§æ‡§è‡§Ç', active: true },
            { id: 4, name: '‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-heartbeat', fee: 30, duration: '5-7 ‡§¶‡§ø‡§®', description: '‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§≠‡§æ‡§∞‡§§ ‡§ó‡•ã‡§≤‡•ç‡§°‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', active: true },
            { id: 5, name: 'ABHA ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-hospital', fee: 20, duration: '3-5 ‡§¶‡§ø‡§®', description: '‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§≠‡§æ‡§∞‡§§ ‡§π‡•á‡§≤‡•ç‡§• ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü', active: true },
            { id: 6, name: '‡§ú‡§®‡•ç‡§Æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', icon: 'fas fa-baby', fee: 40, duration: '10-15 ‡§¶‡§ø‡§®', description: '‡§ú‡§®‡•ç‡§Æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', active: true },
            { id: 7, name: '‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', icon: 'fas fa-cross', fee: 40, duration: '10-15 ‡§¶‡§ø‡§®', description: '‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', active: true },
            { id: 8, name: '‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', icon: 'fas fa-money-bill', fee: 60, duration: '15-20 ‡§¶‡§ø‡§®', description: '‡§Ü‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', active: true },
            { id: 9, name: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', icon: 'fas fa-shopping-basket', fee: 80, duration: '20-30 ‡§¶‡§ø‡§®', description: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§®', active: true }
        ];
        
        let applications = [];
        let users = [];

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const homePage = document.getElementById('homePage');
        const userPanel = document.getElementById('userPanel');
        const adminPanel = document.getElementById('adminPanel');

        // Initialize App
        async function initApp() {
            loadServices();
            setupEventListeners();
            loadSavedConfig();
            
            // Sync data from database on app start
            try {
                await loadUserApplicationsFromDatabase();
                console.log('üîÑ Initial data sync completed');
            } catch (error) {
                console.error('‚ùå Initial data sync failed:', error);
            }
            
            updateUI();
        }

        // Event Listeners
        function setupEventListeners() {
            // Login/Logout
            loginBtn.addEventListener('click', () => {
                loginModal.classList.remove('hidden');
                showLoginForm();
            });
            logoutBtn.addEventListener('click', logout);
            document.getElementById('closeLogin').addEventListener('click', () => loginModal.classList.add('hidden'));
            document.getElementById('loginSubmit').addEventListener('click', (e) => {
                e.preventDefault();
                handleLogin();
            });
            
            // Signup
            document.getElementById('showSignup').addEventListener('click', showSignupForm);
            document.getElementById('showLogin').addEventListener('click', showLoginForm);
            document.getElementById('signupSubmit').addEventListener('click', (e) => {
                e.preventDefault();
                handleSignup();
            });
            document.getElementById('cancelSignup').addEventListener('click', () => loginModal.classList.add('hidden'));

            // Navigation
            document.getElementById('homeBtn').addEventListener('click', showHome);
            document.getElementById('backToUserPanel').addEventListener('click', showUserPanel);

            // User Panel
            document.getElementById('syncDataBtn').addEventListener('click', handleManualSync);
            document.getElementById('trackingBtn').addEventListener('click', showTracking);
            document.getElementById('cancelForm').addEventListener('click', showUserPanel);
            document.getElementById('serviceForm').addEventListener('submit', handleServiceApplication);
            document.getElementById('trackBtn').addEventListener('click', trackApplication);

            // Admin Panel
            document.getElementById('addServiceBtn').addEventListener('click', () => document.getElementById('addServiceModal').classList.remove('hidden'));
            document.getElementById('closeAddService').addEventListener('click', () => document.getElementById('addServiceModal').classList.add('hidden'));
            document.getElementById('addServiceForm').addEventListener('submit', handleAddService);
            document.getElementById('previewChanges').addEventListener('click', previewHomePageChanges);

            // Admin Tabs
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', (e) => switchAdminTab(e.target.dataset.tab));
            });

            // Database Selection Cards
            document.querySelectorAll('[data-db]').forEach(card => {
                card.addEventListener('click', (e) => {
                    const dbType = e.currentTarget.dataset.db;
                    selectDatabase(dbType, e);
                });
            });

            // Database Configuration Buttons
            document.getElementById('testSheetsBtn').addEventListener('click', testSheetsConnection);
            document.getElementById('saveSheetsBtn').addEventListener('click', saveSheetsConfig);
            document.getElementById('testJsonbinBtn').addEventListener('click', testJsonbinConnection);
            document.getElementById('saveJsonbinBtn').addEventListener('click', saveJsonbinConfig);
            document.getElementById('testFirebaseBtn').addEventListener('click', testFirebaseConnection);
            document.getElementById('saveFirebaseBtn').addEventListener('click', saveFirebaseConfig);
            
            // Current Configuration Buttons
            document.getElementById('testCurrentConnection').addEventListener('click', testCurrentDatabaseConnection);
            document.getElementById('refreshConfig').addEventListener('click', refreshDatabaseConfig);
        }

        // User Management Functions
        async function handleLogin() {
            const userType = document.getElementById('userType').value;
            const mobile = document.getElementById('mobile').value;
            const password = document.getElementById('password').value;

            if (!mobile || !password) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç');
                return;
            }

            // Admin credentials (hardcoded)
            if (userType === 'admin' && mobile === '2206' && password === '9958') {
                currentUser = { type: userType, mobile: mobile, name: 'Admin' };
                loginModal.classList.add('hidden');
                updateUI();
                clearLoginForm();
                alert('‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡§´‡§≤!');
                return;
            }

            // User credentials - First check database, then local storage
            if (userType === 'user') {
                // Show loading message immediately
                const loginBtn = document.getElementById('loginSubmit');
                const originalText = loginBtn.innerHTML;
                loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡§≤‡•â‡§ó‡§ø‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
                loginBtn.disabled = true;

                try {
                    // First sync all users from database to get latest data
                    await syncUsersFromDatabase();
                    
                    // Now check for user in updated local storage
                    const user = registeredUsers.find(u => u.mobile === mobile && u.password === password);
                    
                    if (user) {
                        currentUser = { type: userType, mobile: mobile, name: user.name, email: user.email };
                        
                        // Update last login
                        user.lastLogin = new Date().toISOString();
                        user.lastDevice = navigator.userAgent.substring(0, 50); // Store device info
                        localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                        
                        // Update user in database with new login info
                        await updateUserInDatabase(user);
                        
                        loginModal.classList.add('hidden');
                        clearLoginForm();
                        
                        // Show success message
                        alert(`‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${user.name}! ‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡§≠‡•Ä devices ‡§∏‡•á sync ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...`);
                        
                        // Load user's applications from database (cross-device sync)
                        await loadUserApplicationsFromDatabase();
                        updateUI();
                        
                        console.log('‚úÖ Cross-device login successful for:', user.name);
                        
                    } else {
                        alert('‡§ó‡§≤‡§§ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°‡•§\n\n‡§Ø‡§¶‡§ø ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§§‡•ã ‡§ï‡•É‡§™‡§Ø‡§æ "‡§∏‡§æ‡§á‡§®‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§');
                    }
                    
                } catch (error) {
                    console.error('‚ùå Login error:', error);
                    
                    // Fallback to local storage if database fails
                    const user = registeredUsers.find(u => u.mobile === mobile && u.password === password);
                    if (user) {
                        currentUser = { type: userType, mobile: mobile, name: user.name, email: user.email };
                        loginModal.classList.add('hidden');
                        clearLoginForm();
                        updateUI();
                        alert(`‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${user.name}! (‡§ë‡§´‡§≤‡§æ‡§á‡§® ‡§Æ‡•ã‡§° - ‡§ï‡•Å‡§õ ‡§°‡•á‡§ü‡§æ sync ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ)`);
                    } else {
                        alert('‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');
                    }
                } finally {
                    // Restore login button
                    loginBtn.innerHTML = originalText;
                    loginBtn.disabled = false;
                }
                return;
            }

            alert('‡§ó‡§≤‡§§ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä');
        }

        function handleSignup() {
            const name = document.getElementById('signupName').value.trim();
            const mobile = document.getElementById('signupMobile').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const email = document.getElementById('signupEmail').value.trim();
            const termsAgree = document.getElementById('termsAgree').checked;

            // Validation
            if (!name || !mobile || !password || !confirmPassword) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç (*)');
                return;
            }

            if (mobile.length !== 10 || !/^\d{10}$/.test(mobile)) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }

            if (password.length < 4) {
                alert('‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 4 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è');
                return;
            }

            if (password !== confirmPassword) {
                alert('‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Æ‡•à‡§ö ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∞‡§π‡•á‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§');
                return;
            }

            if (!termsAgree) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§ø‡§Ø‡§Æ ‡§î‡§∞ ‡§∂‡§∞‡•ç‡§§‡•ã‡§Ç ‡§∏‡•á ‡§∏‡§π‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç');
                return;
            }

            // Check if user already exists
            const existingUser = registeredUsers.find(u => u.mobile === mobile);
            if (existingUser) {
                alert('‡§á‡§∏ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§');
                showLoginForm();
                document.getElementById('mobile').value = mobile;
                return;
            }

            // Create new user
            const newUser = {
                id: 'USER' + Date.now(),
                name: name,
                mobile: mobile,
                password: password,
                email: email || null,
                createdAt: new Date().toISOString(),
                lastLogin: new Date().toISOString()
            };

            // Save user
            registeredUsers.push(newUser);
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));

            // Save to database
            saveUserToDatabase(newUser);

            // Auto login
            currentUser = { type: 'user', mobile: mobile, name: name, email: email };
            loginModal.classList.add('hidden');
            updateUI();
            clearSignupForm();

            alert(`üéâ ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§®‡§æ ‡§ó‡§Ø‡§æ!\n\n‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${name}!\n\n‡§Ü‡§™‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞: ${mobile}\n‡§Ö‡§¨ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§`);
        }

        function showSignupForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('signupForm').classList.remove('hidden');
        }

        function showLoginForm() {
            document.getElementById('signupForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function clearLoginForm() {
            document.getElementById('mobile').value = '';
            document.getElementById('password').value = '';
        }

        function clearSignupForm() {
            document.getElementById('signupName').value = '';
            document.getElementById('signupMobile').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('termsAgree').checked = false;
        }

        function logout() {
            currentUser = null;
            updateUI();
            alert('‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§∏‡§´‡§≤!');
        }

        // UI Updates
        function updateUI() {
            if (currentUser) {
                loginBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                
                if (currentUser.type === 'admin') {
                    homePage.classList.add('hidden');
                    userPanel.classList.add('hidden');
                    adminPanel.classList.remove('hidden');
                    adminPanel.style.display = 'block';
                    loadAdminData();
                } else {
                    homePage.classList.add('hidden');
                    adminPanel.classList.add('hidden');
                    userPanel.classList.remove('hidden');
                    userPanel.style.display = 'block';
                    
                    // Update welcome message
                    document.getElementById('welcomeMessage').textContent = `‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${currentUser.name}!`;
                    
                    loadUserServices();
                    loadUserApplicationHistory();
                }
            } else {
                loginBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                adminPanel.classList.add('hidden');
                adminPanel.style.display = 'none';
                userPanel.classList.add('hidden');
                userPanel.style.display = 'none';
                homePage.classList.remove('hidden');
            }
        }

        function showHome() {
            adminPanel.classList.add('hidden');
            userPanel.classList.add('hidden');
            document.getElementById('applicationPage').classList.add('hidden');
            homePage.classList.remove('hidden');
        }

        function showUserPanel() {
            adminPanel.classList.add('hidden');
            homePage.classList.add('hidden');
            document.getElementById('applicationPage').classList.add('hidden');
            userPanel.classList.remove('hidden');
            userPanel.style.display = 'block';
            loadUserApplicationHistory();
        }

        function showApplicationPage() {
            adminPanel.classList.add('hidden');
            homePage.classList.add('hidden');
            userPanel.classList.add('hidden');
            document.getElementById('applicationPage').classList.remove('hidden');
        }

        // Services Management
        function loadServices() {
            const servicesGrid = document.getElementById('servicesGrid');
            servicesGrid.innerHTML = '';

            services.filter(service => service.active).forEach(service => {
                const serviceCard = createServiceCard(service, !currentUser);
                servicesGrid.appendChild(serviceCard);
            });
        }

        function loadUserServices() {
            const userServices = document.getElementById('userServices');
            userServices.innerHTML = '';

            services.filter(service => service.active).forEach(service => {
                const serviceCard = createServiceCard(service, false);
                userServices.appendChild(serviceCard);
            });
        }

        function createServiceCard(service, disabled = false) {
            const card = document.createElement('div');
            card.className = `service-card bg-white rounded-lg shadow-lg p-6 transition-all duration-300 ${disabled ? 'login-required' : 'hover:shadow-xl cursor-pointer'}`;
            
            card.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl text-purple-600 mb-4">
                        <i class="${service.icon}"></i>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">${service.name}</h3>
                    <p class="text-gray-600 text-sm mb-4">${service.description}</p>
                    <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                        <span><i class="fas fa-rupee-sign"></i> ‚Çπ${service.fee}</span>
                        <span><i class="fas fa-clock"></i> ${service.duration}</span>
                    </div>
                    <button class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition ${disabled ? 'opacity-50 cursor-not-allowed' : ''}" 
                            ${disabled ? 'disabled' : `onclick="applyForService(${service.id})"`}>
                        ${disabled ? '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç' : '‡§Ö‡§≠‡•Ä ‡§Ö‡§™‡•ç‡§≤‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç'}
                    </button>
                </div>
            `;

            return card;
        }

        // Service Application
        function applyForService(serviceId) {
            const service = services.find(s => s.id === serviceId);
            if (!service) return;

            // Update page title
            document.getElementById('applicationPageTitle').textContent = `${service.name} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§®`;
            
            // Show service details
            const serviceDetailsCard = document.getElementById('serviceDetailsCard');
            serviceDetailsCard.innerHTML = `
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="text-4xl text-purple-600">
                            <i class="${service.icon}"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">${service.name}</h3>
                            <p class="text-gray-600">${service.description}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-green-600">‚Çπ${service.fee}</div>
                        <div class="text-sm text-gray-500">
                            <i class="fas fa-clock mr-1"></i>${service.duration}
                        </div>
                    </div>
                </div>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <h4 class="font-semibold text-blue-800 mb-2">‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú:</h4>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li><i class="fas fa-check mr-2"></i>‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã‡§ï‡•â‡§™‡•Ä</li>
                        <li><i class="fas fa-check mr-2"></i>‡§™‡§æ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§æ‡§á‡§ú ‡§´‡•ã‡§ü‡•ã</li>
                        <li><i class="fas fa-check mr-2"></i>‡§™‡§§‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞</li>
                        <li><i class="fas fa-check mr-2"></i>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</li>
                    </ul>
                </div>
            `;
            
            // Store service ID for form submission
            document.getElementById('serviceForm').dataset.serviceId = serviceId;
            
            // Pre-fill user data if available
            if (currentUser) {
                document.querySelector('input[name="fullName"]').value = currentUser.name || '';
                document.querySelector('input[name="mobile"]').value = currentUser.mobile || '';
                document.querySelector('input[name="email"]').value = currentUser.email || '';
            }
            
            // Hide success message and show form
            document.getElementById('submissionSuccess').classList.add('hidden');
            document.getElementById('applicationFormContainer').classList.remove('hidden');
            
            // Show application page
            showApplicationPage();
        }

        async function handleServiceApplication(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const serviceId = parseInt(e.target.dataset.serviceId);
            const service = services.find(s => s.id === serviceId);
            
            const application = {
                id: 'APP' + Date.now(),
                serviceId: serviceId,
                serviceName: service.name,
                fullName: formData.get('fullName'),
                mobile: formData.get('mobile'),
                fatherName: formData.get('fatherName'),
                dob: formData.get('dob'),
                aadhar: formData.get('aadhar'),
                email: formData.get('email'),
                address: formData.get('address'),
                additionalInfo: formData.get('additionalInfo'),
                status: '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§',
                date: new Date().toLocaleDateString('hi-IN'),
                userMobile: currentUser.mobile,
                userName: currentUser.name,
                timestamp: new Date().toISOString()
            };
            
            // Add to local storage
            applications.push(application);
            
            // Save to configured database
            try {
                await saveApplicationToDatabase(application);
                console.log('‚úÖ Application saved to database successfully');
            } catch (error) {
                console.error('‚ùå Error saving to database:', error);
                console.log('üìù Application saved locally only');
            }
            
            // Show success message on the page
            showSubmissionSuccess(application, service);
            
            // Reset form and go back to user panel after 3 seconds
            e.target.reset();
            setTimeout(() => {
                showUserPanel();
            }, 3000);
        }

        function showSubmissionSuccess(application, service) {
            // Hide form and show success message
            document.getElementById('applicationFormContainer').classList.add('hidden');
            document.getElementById('submissionSuccess').classList.remove('hidden');
            
            // Fill success details
            document.getElementById('successDetails').innerHTML = `
                <div class="bg-white rounded-lg p-4 border border-green-300">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <p class="font-semibold text-green-800">üìã ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ID:</p>
                            <p class="text-green-700 font-mono bg-green-100 px-2 py-1 rounded">${application.id}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-green-800">üìÑ ‡§∏‡•á‡§µ‡§æ:</p>
                            <p class="text-green-700">${service.name}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-green-800">üí∞ ‡§´‡•Ä‡§∏:</p>
                            <p class="text-green-700">‚Çπ${service.fee}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-green-800">‚è∞ ‡§∏‡§Æ‡§Ø:</p>
                            <p class="text-green-700">${service.duration}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-green-800">üë§ ‡§®‡§æ‡§Æ:</p>
                            <p class="text-green-700">${application.fullName}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-green-800">üì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</p>
                            <p class="text-green-700">${application.mobile}</p>
                        </div>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                    <p class="text-sm text-blue-800">
                        <i class="fas fa-info-circle mr-2"></i>
                        <strong>‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£:</strong> ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ID ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ñ‡•á‡§Ç‡•§ ‡§Ü‡§™ ‡§á‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§Ö‡§™‡§®‡•á ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§æ ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§
                    </p>
                </div>
            `;
            
            // Scroll to success message
            document.getElementById('submissionSuccess').scrollIntoView({ behavior: 'smooth' });
        }

        // User Application History
        function loadUserApplicationHistory() {
            if (!currentUser) return;
            
            const userApplicationsList = document.getElementById('userApplicationsList');
            const userApps = applications.filter(app => app.userMobile === currentUser.mobile);
            
            if (userApps.length === 0) {
                userApplicationsList.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-inbox text-4xl mb-4"></i>
                        <p>‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§Ü‡§µ‡•á‡§¶‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</p>
                        <p class="text-sm mt-2">‡§®‡•Ä‡§ö‡•á ‡§¶‡•Ä ‡§ó‡§à ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç</p>
                        <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                            <p class="text-xs text-blue-600">
                                <i class="fas fa-sync-alt mr-2"></i>
                                ‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡§≠‡•Ä devices ‡§Æ‡•á‡§Ç automatically sync ‡§π‡•ã‡§§‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à
                            </p>
                        </div>
                    </div>
                `;
                return;
            }
            
            // Sort applications by date (newest first)
            const sortedApps = userApps.sort((a, b) => new Date(b.timestamp || b.date) - new Date(a.timestamp || a.date));
            
            userApplicationsList.innerHTML = `
                <div class="mb-4 p-3 bg-green-50 border border-green-200 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-check-circle text-green-600"></i>
                            <span class="text-green-800 font-semibold">
                                ${userApps.length} ‡§Ü‡§µ‡•á‡§¶‡§® ‡§Æ‡§ø‡§≤‡•á (‡§∏‡§≠‡•Ä devices ‡§∏‡•á)
                            </span>
                        </div>
                        <div class="text-xs text-green-600">
                            <i class="fas fa-cloud-download-alt mr-1"></i>
                            Cross-device sync active
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    ${sortedApps.map(app => `
                        <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h4 class="font-semibold text-lg">${app.serviceName}</h4>
                                        <span class="px-2 py-1 rounded text-xs font-medium ${getStatusColor(app.status)}">
                                            ${app.status}
                                        </span>
                                        ${app.timestamp ? `<span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">
                                            <i class="fas fa-cloud mr-1"></i>Synced
                                        </span>` : ''}
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600">
                                        <div>
                                            <i class="fas fa-id-badge mr-2"></i>
                                            <strong>ID:</strong> ${app.id}
                                        </div>
                                        <div>
                                            <i class="fas fa-calendar mr-2"></i>
                                            <strong>‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</strong> ${app.date}
                                        </div>
                                        <div>
                                            <i class="fas fa-user mr-2"></i>
                                            <strong>‡§®‡§æ‡§Æ:</strong> ${app.fullName}
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <button onclick="viewApplicationDetails('${app.id}')" class="text-blue-600 hover:text-blue-800 text-sm">
                                        <i class="fas fa-eye mr-1"></i>‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        async function loadUserApplicationsFromDatabase() {
            if (!activeDatabase || !databaseConfig) {
                console.log('üìù No database configured - using local data only');
                return;
            }

            try {
                console.log('üîÑ Loading user applications from database...');
                
                switch (activeDatabase) {
                    case 'jsonbin':
                        await loadFromJsonBin();
                        break;
                    // Add other database cases as needed
                }
                
                console.log('‚úÖ Data synced successfully from database');
                
            } catch (error) {
                console.error('‚ùå Error loading from database:', error);
                console.log('üìù Using local data only');
            }
        }

        async function loadFromJsonBin() {
            const binId = databaseConfig.binId;
            const apiKey = databaseConfig.apiKey;
            
            if (!binId) {
                console.log('‚ö†Ô∏è No Bin ID configured - cannot sync data');
                return;
            }
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    headers: {
                        'X-Master-Key': apiKey
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const data = result.record;
                    
                    // Replace applications data completely to avoid duplicates
                    if (data.applications && Array.isArray(data.applications)) {
                        applications = [...data.applications];
                        console.log(`üì• Loaded ${applications.length} applications from database`);
                    }
                    
                    // Replace users data completely to avoid duplicates
                    if (data.users && Array.isArray(data.users)) {
                        registeredUsers = [...data.users];
                        localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                        console.log(`üë• Loaded ${registeredUsers.length} users from database`);
                    }
                    
                } else {
                    throw new Error(`JSONBin API error: ${response.status}`);
                }
            } catch (error) {
                console.error('JSONBin load error:', error);
                throw error;
            }
        }

        // Cross-device sync functions
        async function syncUsersFromDatabase() {
            if (!activeDatabase || !databaseConfig) {
                console.log('üìù No database configured - using local users only');
                return;
            }

            try {
                console.log('üîÑ Syncing users from database for cross-device login...');
                
                switch (activeDatabase) {
                    case 'jsonbin':
                        await loadUsersFromJsonBin();
                        break;
                    // Add other database cases as needed
                }
                
                console.log('‚úÖ Users synced successfully from database');
                
            } catch (error) {
                console.error('‚ùå Error syncing users from database:', error);
                throw error;
            }
        }

        async function loadUsersFromJsonBin() {
            const binId = databaseConfig.binId;
            const apiKey = databaseConfig.apiKey;
            
            if (!binId) {
                console.log('‚ö†Ô∏è No Bin ID configured - cannot sync users');
                return;
            }
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    headers: {
                        'X-Master-Key': apiKey
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const data = result.record;
                    
                    // Update users data from database
                    if (data.users && Array.isArray(data.users)) {
                        // Merge with local users, prioritizing database data
                        const localUsers = [...registeredUsers];
                        const databaseUsers = [...data.users];
                        
                        // Create a merged list with database users taking priority
                        const mergedUsers = [];
                        const processedMobiles = new Set();
                        
                        // First add all database users
                        databaseUsers.forEach(dbUser => {
                            mergedUsers.push(dbUser);
                            processedMobiles.add(dbUser.mobile);
                        });
                        
                        // Then add local users that aren't in database
                        localUsers.forEach(localUser => {
                            if (!processedMobiles.has(localUser.mobile)) {
                                mergedUsers.push(localUser);
                            }
                        });
                        
                        registeredUsers = mergedUsers;
                        localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                        console.log(`üë• Synced ${registeredUsers.length} users (${databaseUsers.length} from database)`);
                    }
                    
                } else {
                    throw new Error(`JSONBin API error: ${response.status}`);
                }
            } catch (error) {
                console.error('JSONBin users sync error:', error);
                throw error;
            }
        }

        async function updateUserInDatabase(user) {
            if (!activeDatabase || !databaseConfig) {
                console.log('üìù No database configured - user update saved locally only');
                return;
            }

            try {
                console.log('üíæ Updating user login info in database:', user.name);
                
                switch (activeDatabase) {
                    case 'jsonbin':
                        await updateUserInJsonBin(user);
                        break;
                    // Add other database cases as needed
                }
                
                console.log('‚úÖ User updated in database successfully');
            } catch (error) {
                console.error('‚ùå Error updating user in database:', error);
                // Don't throw error - login should still work even if database update fails
            }
        }

        async function updateUserInJsonBin(updatedUser) {
            const binId = databaseConfig.binId;
            const apiKey = databaseConfig.apiKey;
            
            if (!binId) {
                throw new Error('No Bin ID configured');
            }
            
            try {
                // First, get existing data
                const getResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    headers: {
                        'X-Master-Key': apiKey
                    }
                });
                
                let data = { applications: [], users: [] };
                
                if (getResponse.ok) {
                    const currentData = await getResponse.json();
                    data = currentData.record;
                    
                    if (!data.applications) data.applications = [];
                    if (!data.users) data.users = [];
                }
                
                // Update user in data
                const userIndex = data.users.findIndex(u => u.mobile === updatedUser.mobile);
                if (userIndex >= 0) {
                    data.users[userIndex] = updatedUser; // Update existing user
                } else {
                    data.users.push(updatedUser); // Add new user
                }
                
                data.lastUpdated = new Date().toISOString();
                data.lastUserUpdate = {
                    user: updatedUser.name,
                    mobile: updatedUser.mobile,
                    timestamp: new Date().toISOString()
                };
                
                // Save updated data
                const updateResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': apiKey
                    },
                    body: JSON.stringify(data)
                });

                if (!updateResponse.ok) {
                    throw new Error('Failed to update JSONBin with user data');
                }
            } catch (error) {
                console.error('JSONBin user update error:', error);
                throw error;
            }
        }

        function getStatusColor(status) {
            switch(status) {
                case '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§': return 'bg-blue-100 text-blue-800';
                case '‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç': return 'bg-yellow-100 text-yellow-800';
                case '‡§§‡•à‡§Ø‡§æ‡§∞': return 'bg-green-100 text-green-800';
                case '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ': return 'bg-purple-100 text-purple-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function viewApplicationDetails(appId) {
            const application = applications.find(app => app.id === appId);
            if (application) {
                const service = services.find(s => s.id === application.serviceId);
                alert(`üìã ‡§Ü‡§µ‡•á‡§¶‡§® ‡§µ‡§ø‡§µ‡§∞‡§£:\n\nüÜî ID: ${application.id}\nüìÑ ‡§∏‡•á‡§µ‡§æ: ${application.serviceName}\nüë§ ‡§®‡§æ‡§Æ: ${application.fullName}\nüì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: ${application.mobile}\nüë®‚Äçüë¶ ‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ: ${application.fatherName || 'N/A'}\nüéÇ ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø: ${application.dob || 'N/A'}\nüè† ‡§™‡§§‡§æ: ${application.address}\nüìß ‡§à‡§Æ‡•á‡§≤: ${application.email || 'N/A'}\nüìÖ ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï: ${application.date}\nüìä ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏: ${application.status}\nüí∞ ‡§´‡•Ä‡§∏: ‚Çπ${service?.fee || 'N/A'}`);
            }
        }

        // Tracking
        function showTracking() {
            document.getElementById('trackingSection').classList.remove('hidden');
            document.getElementById('trackingSection').scrollIntoView({ behavior: 'smooth' });
        }

        function trackApplication() {
            const trackingId = document.getElementById('trackingId').value.trim();
            const trackingResult = document.getElementById('trackingResult');
            
            if (!trackingId) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ID ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }
            
            const application = applications.find(app => app.id === trackingId);
            
            if (application) {
                trackingResult.innerHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-2">‡§Ü‡§µ‡•á‡§¶‡§® ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ!</h4>
                        <div class="space-y-2 text-sm">
                            <p><strong>‡§∏‡•á‡§µ‡§æ:</strong> ${application.serviceName}</p>
                            <p><strong>‡§®‡§æ‡§Æ:</strong> ${application.fullName}</p>
                            <p><strong>‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</strong> ${application.date}</p>
                            <p><strong>‡§∏‡•ç‡§ü‡•á‡§ü‡§∏:</strong> <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">${application.status}</span></p>
                        </div>
                    </div>
                `;
                trackingResult.classList.remove('hidden');
            } else {
                trackingResult.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <p class="text-red-800">‡§á‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ID ‡§∏‡•á ‡§ï‡•ã‡§à ‡§Ü‡§µ‡•á‡§¶‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</p>
                    </div>
                `;
                trackingResult.classList.remove('hidden');
            }
        }

        // Admin Functions
        function loadAdminData() {
            loadAdminServices();
            loadAdminApplications();
            loadAdminUsers();
            updateDatabaseStatus();
        }

        function loadAdminServices() {
            const table = document.getElementById('adminServicesTable');
            table.innerHTML = '';
            
            services.forEach(service => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3">${service.name}</td>
                    <td class="px-4 py-3">‚Çπ${service.fee}</td>
                    <td class="px-4 py-3">${service.duration}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 rounded text-xs ${service.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${service.active ? '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø' : '‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø'}
                        </span>
                    </td>
                    <td class="px-4 py-3">
                        <button onclick="toggleService(${service.id})" class="text-blue-600 hover:text-blue-800 mr-2">
                            ${service.active ? '‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç' : '‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡•á‡§Ç'}
                        </button>
                        <button onclick="editService(${service.id})" class="text-green-600 hover:text-green-800 mr-2">‡§è‡§°‡§ø‡§ü</button>
                        <button onclick="deleteService(${service.id})" class="text-red-600 hover:text-red-800">‡§°‡§ø‡§≤‡•Ä‡§ü</button>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        function loadAdminApplications() {
            const table = document.getElementById('adminApplicationsTable');
            table.innerHTML = '';
            
            applications.forEach(app => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3">${app.id}</td>
                    <td class="px-4 py-3">${app.fullName}</td>
                    <td class="px-4 py-3">${app.serviceName}</td>
                    <td class="px-4 py-3">${app.date}</td>
                    <td class="px-4 py-3">
                        <select onchange="updateApplicationStatus('${app.id}', this.value)" class="border rounded px-2 py-1 text-sm">
                            <option value="‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§" ${app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'selected' : ''}>‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§</option>
                            <option value="‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç" ${app.status === '‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç' ? 'selected' : ''}>‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç</option>
                            <option value="‡§§‡•à‡§Ø‡§æ‡§∞" ${app.status === '‡§§‡•à‡§Ø‡§æ‡§∞' ? 'selected' : ''}>‡§§‡•à‡§Ø‡§æ‡§∞</option>
                            <option value="‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ" ${app.status === '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ' ? 'selected' : ''}>‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ</option>
                        </select>
                    </td>
                    <td class="px-4 py-3">
                        <button onclick="viewApplication('${app.id}')" class="text-blue-600 hover:text-blue-800 mr-2">‡§¶‡•á‡§ñ‡•á‡§Ç</button>
                        <button onclick="deleteApplication('${app.id}')" class="text-red-600 hover:text-red-800">‡§°‡§ø‡§≤‡•Ä‡§ü</button>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        function loadAdminUsers() {
            const table = document.getElementById('adminUsersTable');
            table.innerHTML = '';
            
            // Show registered users
            registeredUsers.forEach((user, index) => {
                const userApps = applications.filter(app => app.userMobile === user.mobile);
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3">${user.id}</td>
                    <td class="px-4 py-3">${user.name}</td>
                    <td class="px-4 py-3">${user.mobile}</td>
                    <td class="px-4 py-3">${userApps.length}</td>
                    <td class="px-4 py-3">
                        <button onclick="viewUserDetails('${user.mobile}')" class="text-blue-600 hover:text-blue-800">‡§¶‡•á‡§ñ‡•á‡§Ç</button>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        function switchAdminTab(tabName) {
            // Update tab buttons - Flipkart style
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.className = 'admin-tab admin-tab-flipkart py-3 px-4 mx-1 rounded-lg text-sm font-medium text-gray-600 whitespace-nowrap';
            });
            
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            activeTab.className = 'admin-tab admin-tab-flipkart active py-3 px-4 mx-1 rounded-lg text-sm font-medium whitespace-nowrap';
            
            // Show/hide content
            document.querySelectorAll('.admin-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            const contentMap = {
                'services': 'adminServices',
                'applications': 'adminApplications',
                'users': 'adminUsers',
                'settings': 'adminSettings'
            };
            
            document.getElementById(contentMap[tabName]).classList.remove('hidden');
        }

        function handleAddService(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const newService = {
                id: services.length + 1,
                name: formData.get('serviceName'),
                icon: 'fas fa-file-alt',
                fee: parseInt(formData.get('fee')),
                duration: `${formData.get('duration')} ‡§¶‡§ø‡§®`,
                description: formData.get('description') || '‡§∏‡•á‡§µ‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£',
                active: true
            };
            
            services.push(newService);
            loadServices();
            loadAdminServices();
            
            document.getElementById('addServiceModal').classList.add('hidden');
            e.target.reset();
            alert('‡§®‡§à ‡§∏‡•á‡§µ‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡•ã‡§°‡§º‡•Ä ‡§ó‡§à!');
        }

        function toggleService(serviceId) {
            const service = services.find(s => s.id === serviceId);
            if (service) {
                service.active = !service.active;
                loadServices();
                loadAdminServices();
                if (currentUser && currentUser.type === 'user') {
                    loadUserServices();
                }
            }
        }

        function editService(serviceId) {
            alert('‡§è‡§°‡§ø‡§ü ‡§´‡•Ä‡§ö‡§∞ ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§è‡§ó‡§æ!');
        }

        function deleteService(serviceId) {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§∏‡•á‡§µ‡§æ ‡§ï‡•ã ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
                services = services.filter(s => s.id !== serviceId);
                loadServices();
                loadAdminServices();
                if (currentUser && currentUser.type === 'user') {
                    loadUserServices();
                }
            }
        }

        function updateApplicationStatus(appId, newStatus) {
            const application = applications.find(app => app.id === appId);
            if (application) {
                application.status = newStatus;
                // Refresh user history if user is logged in
                if (currentUser && currentUser.type === 'user') {
                    loadUserApplicationHistory();
                }
                alert('‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!');
            }
        }

        function viewApplication(appId) {
            const application = applications.find(app => app.id === appId);
            if (application) {
                alert(`‡§Ü‡§µ‡•á‡§¶‡§® ‡§µ‡§ø‡§µ‡§∞‡§£:\n\nID: ${application.id}\n‡§®‡§æ‡§Æ: ${application.fullName}\n‡§∏‡•á‡§µ‡§æ: ${application.serviceName}\n‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: ${application.mobile}\n‡§™‡§§‡§æ: ${application.address}\n‡§∏‡•ç‡§ü‡•á‡§ü‡§∏: ${application.status}`);
            }
        }

        function deleteApplication(appId) {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•ã ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
                applications = applications.filter(app => app.id !== appId);
                loadAdminApplications();
                loadAdminUsers();
            }
        }

        function viewUserDetails(mobile) {
            const user = registeredUsers.find(u => u.mobile === mobile);
            const userApps = applications.filter(app => app.userMobile === mobile);
            const details = userApps.map(app => `${app.serviceName} (${app.status})`).join('\n');
            
            if (user) {
                alert(`‡§Ø‡•Ç‡§ú‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£:\n\n‡§®‡§æ‡§Æ: ${user.name}\n‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: ${mobile}\n‡§à‡§Æ‡•á‡§≤: ${user.email || 'N/A'}\n‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®: ${new Date(user.createdAt).toLocaleDateString('hi-IN')}\n‡§ï‡•Å‡§≤ ‡§Ü‡§µ‡•á‡§¶‡§®: ${userApps.length}\n\n‡§∏‡•á‡§µ‡§æ‡§è‡§Ç:\n${details || '‡§ï‡•ã‡§à ‡§Ü‡§µ‡•á‡§¶‡§® ‡§®‡§π‡•Ä‡§Ç'}`);
            }
        }

        // Database Functions (same as before)
        function selectDatabase(dbType, event = null) {
            document.querySelectorAll('.database-config').forEach(config => {
                config.classList.add('hidden');
            });
            
            document.querySelectorAll('[data-db]').forEach(card => {
                card.classList.remove('border-blue-500', 'bg-blue-50');
                card.classList.add('border-gray-200');
            });
            
            const configMap = {
                'sheets': 'sheetsConfig',
                'jsonbin': 'jsonbinConfig', 
                'firebase': 'firebaseConfig'
            };
            
            document.getElementById(configMap[dbType]).classList.remove('hidden');
            
            if (event) {
                const card = event.currentTarget;
                card.classList.add('border-blue-500', 'bg-blue-50');
                card.classList.remove('border-gray-200');
            } else {
                const card = document.querySelector(`[data-db="${dbType}"]`);
                if (card) {
                    card.classList.add('border-blue-500', 'bg-blue-50');
                    card.classList.remove('border-gray-200');
                }
            }
        }

        // Database Integration Variables
        let activeDatabase = null;
        let databaseConfig = null;

        async function saveUserToDatabase(user) {
            if (!activeDatabase || !databaseConfig) {
                console.log('üìù No database configured - saving user locally only');
                return;
            }

            try {
                console.log('üíæ Saving user to database:', user.name);
                
                switch (activeDatabase) {
                    case 'jsonbin':
                        await saveUserToJsonBin(user);
                        break;
                    // Add other database cases as needed
                }
                
                console.log('‚úÖ User saved to database successfully');
            } catch (error) {
                console.error('‚ùå Error saving user to database:', error);
                throw error;
            }
        }

        async function saveUserToJsonBin(user) {
            const binId = databaseConfig.binId;
            const apiKey = databaseConfig.apiKey;
            
            if (!binId) {
                throw new Error('No Bin ID configured');
            }
            
            try {
                // First, get existing data
                const getResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    headers: {
                        'X-Master-Key': apiKey
                    }
                });
                
                let data = { applications: [], users: [] };
                
                if (getResponse.ok) {
                    const currentData = await getResponse.json();
                    data = currentData.record;
                    
                    if (!data.applications) data.applications = [];
                    if (!data.users) data.users = [];
                }
                
                // Add user to data
                const existingUserIndex = data.users.findIndex(u => u.mobile === user.mobile);
                if (existingUserIndex >= 0) {
                    data.users[existingUserIndex] = user; // Update existing user
                } else {
                    data.users.push(user); // Add new user
                }
                
                data.lastUpdated = new Date().toISOString();
                
                // Save updated data
                const updateResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': apiKey
                    },
                    body: JSON.stringify(data)
                });

                if (!updateResponse.ok) {
                    throw new Error('Failed to update JSONBin with user data');
                }
            } catch (error) {
                console.error('JSONBin user save error:', error);
                throw error;
            }
        }

        async function saveApplicationToDatabase(application) {
            if (!activeDatabase || !databaseConfig) {
                console.log('üìù No active database configured - saving locally only');
                return;
            }

            try {
                switch (activeDatabase) {
                    case 'jsonbin':
                        await saveToJsonBin(application);
                        break;
                    // Add other database cases as needed
                }
                console.log('üíæ Application saved to', activeDatabase, 'database');
            } catch (error) {
                console.error('‚ùå Error saving to database:', error);
                throw error;
            }
        }

        async function saveToJsonBin(application) {
            const binId = databaseConfig.binId;
            const apiKey = databaseConfig.apiKey;
            
            if (!binId) {
                throw new Error('No Bin ID configured');
            }
            
            try {
                const getResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                    headers: {
                        'X-Master-Key': apiKey
                    }
                });
                
                if (getResponse.ok) {
                    const currentData = await getResponse.json();
                    const data = currentData.record;
                    
                    if (!data.applications) data.applications = [];
                    if (!data.users) data.users = [];
                    
                    data.applications.push(application);
                    data.lastUpdated = new Date().toISOString();
                    
                    const updateResponse = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Master-Key': apiKey
                        },
                        body: JSON.stringify(data)
                    });

                    if (!updateResponse.ok) {
                        throw new Error('Failed to update JSONBin');
                    }
                } else {
                    throw new Error('Failed to read from JSONBin');
                }
            } catch (error) {
                console.error('JSONBin save error:', error);
                throw error;
            }
        }

        // Placeholder functions for other database operations
        async function testSheetsConnection() { alert('Google Sheets ‡§ü‡•á‡§∏‡•ç‡§ü ‡§´‡•Ä‡§ö‡§∞ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§è‡§ó‡§æ!'); }
        async function saveSheetsConfig() { alert('Google Sheets ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§è‡§ó‡§æ!'); }
        async function testJsonbinConnection() { 
            const apiKey = document.getElementById('jsonbinApiKey').value;
            if (!apiKey) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ API Key ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }
            alert('JSONBin ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§∏‡§´‡§≤!');
        }
        async function saveJsonbinConfig() {
            const config = {
                type: 'jsonbin',
                apiKey: document.getElementById('jsonbinApiKey').value,
                binId: document.getElementById('jsonbinId').value,
                binName: document.getElementById('jsonbinName').value || 'mushtaq-store-data'
            };
            
            if (!config.apiKey) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ API Key ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }
            
            localStorage.setItem('databaseConfig', JSON.stringify(config));
            databaseConfig = config;
            activeDatabase = 'jsonbin';
            alert('‚úÖ JSONBin ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à!');
        }
        async function testFirebaseConnection() { alert('Firebase ‡§ü‡•á‡§∏‡•ç‡§ü ‡§´‡•Ä‡§ö‡§∞ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§è‡§ó‡§æ!'); }
        async function saveFirebaseConfig() { alert('Firebase ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§è‡§ó‡§æ!'); }

        function showConnectionStatus(type, message) {
            console.log(`${type}: ${message}`);
        }

        function updateDatabaseStatus() {
            const statusContent = document.getElementById('databaseStatusContent');
            const currentConfigDisplay = document.getElementById('currentConfigDisplay');
            const configDetails = document.getElementById('configDetails');
            
            if (activeDatabase && databaseConfig) {
                // Show active database status
                statusContent.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-check-circle text-green-600"></i>
                        <span class="text-green-800 font-semibold">${getDatabaseDisplayName(activeDatabase)} ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•à</span>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø</span>
                    </div>
                `;
                
                // Show current configuration
                currentConfigDisplay.classList.remove('hidden');
                configDetails.innerHTML = generateConfigDetails();
                
            } else {
                // Show no database configured
                statusContent.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-exclamation-triangle text-yellow-600"></i>
                        <span class="text-gray-600">‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à - ‡§°‡•á‡§ü‡§æ ‡§ï‡•á‡§µ‡§≤ ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§π‡•ã‡§ó‡§æ</span>
                    </div>
                `;
                currentConfigDisplay.classList.add('hidden');
            }
        }

        function getDatabaseDisplayName(dbType) {
            const names = {
                'jsonbin': 'JSONBin',
                'sheets': 'Google Sheets',
                'firebase': 'Firebase'
            };
            return names[dbType] || dbType;
        }

        function generateConfigDetails() {
            if (!databaseConfig) return '';
            
            switch (activeDatabase) {
                case 'jsonbin':
                    return `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ü‡§æ‡§á‡§™</div>
                                <div class="font-semibold text-blue-800">
                                    <i class="fas fa-database mr-2"></i>JSONBin.io
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">API Key</div>
                                <div class="font-mono text-sm text-gray-800">
                                    ${databaseConfig.apiKey ? maskApiKey(databaseConfig.apiKey) : '‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç'}
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">Bin ID</div>
                                <div class="font-mono text-sm text-gray-800">
                                    ${databaseConfig.binId || '‡§ë‡§ü‡•ã-‡§ú‡•á‡§®‡§∞‡•á‡§ü ‡§π‡•ã‡§ó‡§æ'}
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">Bin Name</div>
                                <div class="font-semibold text-gray-800">
                                    ${databaseConfig.binName || 'mushtaq-store-data'}
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏</div>
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-circle text-green-500 text-xs"></i>
                                    <span class="text-green-700 font-semibold">‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°</span>
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü</div>
                                <div class="text-sm text-gray-700">
                                    ${new Date().toLocaleString('hi-IN')}
                                </div>
                            </div>
                        </div>
                    `;
                    
                case 'sheets':
                    return `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ü‡§æ‡§á‡§™</div>
                                <div class="font-semibold text-green-800">
                                    <i class="fas fa-table mr-2"></i>Google Sheets
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">API Key</div>
                                <div class="font-mono text-sm text-gray-800">
                                    ${databaseConfig.apiKey ? maskApiKey(databaseConfig.apiKey) : '‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç'}
                                </div>
                            </div>
                        </div>
                    `;
                    
                case 'firebase':
                    return `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ü‡§æ‡§á‡§™</div>
                                <div class="font-semibold text-orange-800">
                                    <i class="fas fa-fire mr-2"></i>Firebase
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-xs text-gray-500 mb-1">Project ID</div>
                                <div class="font-mono text-sm text-gray-800">
                                    ${databaseConfig.projectId || '‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç'}
                                </div>
                            </div>
                        </div>
                    `;
                    
                default:
                    return '<div class="text-gray-500">‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç</div>';
            }
        }

        function maskApiKey(apiKey) {
            if (!apiKey || apiKey.length < 8) return '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
            return apiKey.substring(0, 4) + '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' + apiKey.substring(apiKey.length - 4);
        }

        function loadSavedConfig() {
            // Auto-configure JSONBin
            const jsonbinConfig = {
                type: 'jsonbin',
                apiKey: '$2a$10$bZUdNc0B9rx7.jxKMYrS/uT4sapfPsojmAKI97/GvC1JoeSW26F6m',
                binId: '',
                binName: 'mushtaq-store-data'
            };
            
            databaseConfig = jsonbinConfig;
            activeDatabase = 'jsonbin';
            localStorage.setItem('databaseConfig', JSON.stringify(jsonbinConfig));
            
            document.getElementById('jsonbinApiKey').value = jsonbinConfig.apiKey;
            document.getElementById('jsonbinId').value = jsonbinConfig.binId;
            document.getElementById('jsonbinName').value = jsonbinConfig.binName;
            
            selectDatabase('jsonbin');
            updateDatabaseStatus();
            console.log('üóÉÔ∏è JSONBin auto-configured');
        }

        async function testCurrentDatabaseConnection() {
            if (!activeDatabase || !databaseConfig) {
                alert('‚ùå ‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');
                return;
            }

            const testBtn = document.getElementById('testCurrentConnection');
            const originalText = testBtn.innerHTML;
            
            testBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡§ü‡•á‡§∏‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            testBtn.disabled = true;

            try {
                switch (activeDatabase) {
                    case 'jsonbin':
                        await testJsonBinConnection();
                        break;
                    case 'sheets':
                        await testSheetsConnection();
                        break;
                    case 'firebase':
                        await testFirebaseConnection();
                        break;
                }
                
                alert('‚úÖ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§∏‡§´‡§≤!');
                updateDatabaseStatus();
                
            } catch (error) {
                console.error('Connection test failed:', error);
                alert('‚ùå ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§∏‡•ç‡§ü ‡§´‡•á‡§≤ ‡§π‡•ã ‡§ó‡§Ø‡§æ: ' + error.message);
            } finally {
                testBtn.innerHTML = originalText;
                testBtn.disabled = false;
            }
        }

        async function testJsonBinConnection() {
            const apiKey = databaseConfig.apiKey;
            
            if (!apiKey) {
                throw new Error('API Key ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä');
            }

            try {
                // Test API key by making a simple request
                const response = await fetch('https://api.jsonbin.io/v3/b', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': apiKey
                    },
                    body: JSON.stringify({ test: 'connection' })
                });

                if (response.ok) {
                    const result = await response.json();
                    console.log('‚úÖ JSONBin connection test successful');
                    return true;
                } else {
                    throw new Error(`API Error: ${response.status}`);
                }
            } catch (error) {
                console.error('JSONBin connection test failed:', error);
                throw error;
            }
        }

        function refreshDatabaseConfig() {
            updateDatabaseStatus();
            alert('üîÑ ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂ ‡§π‡•ã ‡§ó‡§à!');
        }

        async function handleManualSync() {
            if (!currentUser) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç');
                return;
            }

            const syncBtn = document.getElementById('syncDataBtn');
            const originalText = syncBtn.innerHTML;
            
            // Show loading state
            syncBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡§∏‡§ø‡§Ç‡§ï ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            syncBtn.disabled = true;
            
            try {
                await loadUserApplicationsFromDatabase();
                alert('‚úÖ ‡§°‡•á‡§ü‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§ø‡§Ç‡§ï ‡§π‡•ã ‡§ó‡§Ø‡§æ!');
                console.log('üîÑ Manual sync completed successfully');
            } catch (error) {
                console.error('‚ùå Manual sync failed:', error);
                alert('‚ùå ‡§°‡•á‡§ü‡§æ ‡§∏‡§ø‡§Ç‡§ï ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');
            } finally {
                // Restore button state
                syncBtn.innerHTML = originalText;
                syncBtn.disabled = false;
            }
        }

        function previewHomePageChanges() {
            const storeName = document.getElementById('storeName').value;
            const headline = document.getElementById('headline').value;
            const contactNumber = document.getElementById('contactNumber').value;
            
            alert(`‡§π‡•ã‡§Æ ‡§™‡•á‡§ú ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç:\n\n‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§®‡§æ‡§Æ: ${storeName}\n‡§π‡•á‡§°‡§≤‡§æ‡§á‡§®: ${headline}\n‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: ${contactNumber}\n\n‡§®‡•ã‡§ü: ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§π‡•à‡•§`);
        }

        // Initialize the app
        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98400ff763a8599a',t:'MTc1ODY5MzYzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
