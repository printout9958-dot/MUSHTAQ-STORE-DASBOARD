<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mushtaq Store - Digital Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        .notification.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }
        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.9) translateY(-20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 16px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        .service-card {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .service-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        .service-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        .admin-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .data-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }
        .status-processing {
            background: #dbeafe;
            color: #1e40af;
        }
        .hidden {
            display: none !important;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Header -->
    <header class="gradient-bg text-white py-6 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <span class="text-2xl">üè™</span>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold">Mushtaq Store</h1>
                        <p class="text-blue-100">Digital Services & Solutions</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showUserLogin()" class="btn btn-secondary">
                        üë§ User Login
                    </button>
                    <button onclick="showTrackingModal()" class="btn btn-secondary">
                        üìã Track Application
                    </button>
                    <button onclick="showAdminLogin()" class="btn btn-secondary">
                        üîß Admin
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <section class="text-center mb-12">
            <div class="floating-animation inline-block mb-6">
                <div class="w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-4xl text-white shadow-lg">
                    üíº
                </div>
            </div>
            <h2 class="text-4xl font-bold text-gray-800 mb-4">
                ‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π
            </h2>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-4">
                ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç
            </p>
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto">
                <p class="text-yellow-800 font-medium">
                    üîê ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§π‡§≤‡•á <button onclick="showUserLogin()" class="text-blue-600 underline hover:text-blue-800">Login ‡§ï‡§∞‡•á‡§Ç</button>
                </p>
            </div>
        </section>

        <!-- Services Grid -->
        <section id="servicesGridHomepage" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
            <!-- Services will be loaded dynamically -->
        </section>

        <!-- Features Section -->
        <section class="bg-white rounded-2xl p-8 shadow-lg mb-12">
            <h3 class="text-3xl font-bold text-center mb-8 text-gray-800">‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Ç</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">‚ö°</span>
                    </div>
                    <h4 class="text-xl font-bold mb-2">‡§§‡•á‡§ú‡§º ‡§∏‡•á‡§µ‡§æ</h4>
                    <p class="text-gray-600">24-48 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§™‡•Ç‡§∞‡§æ</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">üîí</span>
                    </div>
                    <h4 class="text-xl font-bold mb-2">‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§</h4>
                    <p class="text-gray-600">‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§É ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">üí∞</span>
                    </div>
                    <h4 class="text-xl font-bold mb-2">‡§ï‡§ø‡§´‡§æ‡§Ø‡§§‡•Ä ‡§¶‡§∞</h4>
                    <p class="text-gray-600">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§∏‡•á ‡§ï‡§Æ ‡§¶‡§æ‡§Æ</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl p-8 text-center">
            <h3 class="text-3xl font-bold mb-4">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="text-xl font-bold mb-2">üìû ‡§´‡•ã‡§®</h4>
                    <p class="text-lg">+91 93550 22066</p>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-2">üìç ‡§™‡§§‡§æ</h4>
                    <p class="text-lg">Mushtaq Store, Main Market</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Service Form Modal -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modalTitle" class="text-2xl font-bold text-gray-800"></h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="serviceForm" onsubmit="submitForm(event)">
                <div class="form-group">
                    <label class="form-label">‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ *</label>
                    <select id="serviceType" class="form-input" required>
                        <option value="">‡§∏‡•á‡§µ‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *</label>
                    <input type="text" id="fullName" class="form-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *</label>
                    <input type="tel" id="mobile" class="form-input" pattern="[0-9]{10}" required>
                </div>

                <div class="form-group">
                    <label class="form-label">‡§à‡§Æ‡•á‡§≤</label>
                    <input type="email" id="email" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label">‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ *</label>
                    <textarea id="address" class="form-input" rows="3" required></textarea>
                </div>

                <!-- Dynamic Fields Container -->
                <div id="dynamicFields"></div>

                <!-- File Upload Section -->
                <div class="form-group">
                    <label class="form-label">Upload Documents</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center bg-gray-50">
                        <div class="text-2xl mb-2">üìÅ</div>
                        <p class="text-sm text-gray-600 mb-3">Upload required documents (PDF, JPG, PNG)</p>
                        <input type="file" id="serviceDocuments" class="hidden" multiple 
                               accept=".pdf,.jpg,.jpeg,.png" onchange="handleServiceDocuments(event)">
                        <button type="button" onclick="document.getElementById('serviceDocuments').click()" 
                                class="btn btn-secondary text-sm">
                            Choose Files
                        </button>
                        <p class="text-xs text-gray-500 mt-2">Max 5MB per file</p>
                    </div>
                    <div id="serviceUploadedFiles" class="mt-3 space-y-2">
                        <!-- Uploaded files will appear here -->
                    </div>
                </div>

                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">
                        <span id="submitText">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç</span>
                        <span id="submitLoader" class="loading hidden ml-2"></span>
                    </button>
                    <button type="button" onclick="closeModal()" class="btn btn-secondary">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                    <button type="button" onclick="backToDashboard()" class="btn btn-secondary" id="backToDashboardBtn" style="display: none;">
                        üìä Dashboard
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tracking Modal -->
    <div id="trackingModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
                <button onclick="closeTrackingModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form onsubmit="trackApplication(event)">
                <div class="form-group">
                    <label class="form-label">‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§à‡§°‡•Ä</label>
                    <input type="text" id="trackingId" class="form-input" placeholder="MS-XXXXXX" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
                    <input type="tel" id="trackingMobile" class="form-input" pattern="[0-9]{10}" required>
                </div>

                <button type="submit" class="btn btn-primary w-full">‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç</button>
            </form>

            <div id="trackingResult" class="hidden mt-6 p-4 bg-gray-50 rounded-lg"></div>
        </div>
    </div>

    <!-- User Login Modal -->
    <div id="userLoginModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">User Login</h3>
                <button onclick="closeUserLogin()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form onsubmit="userLogin(event)">
                <div class="form-group">
                    <label class="form-label">‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ *</label>
                    <input type="text" id="userName" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *</label>
                    <input type="tel" id="userMobile" class="form-input" pattern="[0-9]{10}" required>
                </div>

                <button type="submit" class="btn btn-primary w-full">Login / Register</button>
            </form>
            
            <p class="text-sm text-gray-600 mt-4 text-center">
                ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞? ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç - ‡§Ü‡§™‡§ï‡§æ account automatically ‡§¨‡§® ‡§ú‡§æ‡§è‡§ó‡§æ!
            </p>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">Admin Login</h3>
                <button onclick="closeAdminLogin()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form onsubmit="adminLogin(event)">
                <div class="form-group">
                    <label class="form-label">Admin ID</label>
                    <input type="text" id="adminId" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="adminPassword" class="form-input" required>
                </div>

                <button type="submit" class="btn btn-primary w-full">Login</button>
            </form>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="hidden fixed inset-0 bg-gray-100 z-50 overflow-y-auto">
        <div class="container mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800">Welcome, <span id="currentUserName"></span>!</h2>
                    <p class="text-gray-600">‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§≠‡•Ä services ‡§î‡§∞ history ‡§Ø‡§π‡§æ‡§Å ‡§¶‡•á‡§ñ‡•á‡§Ç</p>
                </div>
                <button onclick="logoutUser()" class="btn btn-secondary">Logout</button>
            </div>

            <!-- User Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                            <span class="text-2xl">üìã</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Total Applications</h3>
                            <p class="text-2xl font-bold text-blue-600" id="userTotalApps">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-4">
                            <span class="text-2xl">‚è≥</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Pending</h3>
                            <p class="text-2xl font-bold text-yellow-600" id="userPendingApps">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                            <span class="text-2xl">‚úÖ</span>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">Completed</h3>
                            <p class="text-2xl font-bold text-green-600" id="userCompletedApps">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h3 class="text-xl font-bold mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    <button onclick="quickService('aadhaar')" class="p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors">
                        <div class="text-2xl mb-2">üÜî</div>
                        <div class="text-sm font-medium">Aadhaar</div>
                    </button>
                    <button onclick="quickService('pan')" class="p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors">
                        <div class="text-2xl mb-2">üí≥</div>
                        <div class="text-sm font-medium">PAN Card</div>
                    </button>
                    <button onclick="quickService('voter')" class="p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors">
                        <div class="text-2xl mb-2">üó≥Ô∏è</div>
                        <div class="text-sm font-medium">Voter ID</div>
                    </button>
                    <button onclick="quickService('ration')" class="p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors">
                        <div class="text-2xl mb-2">üçö</div>
                        <div class="text-sm font-medium">Ration Card</div>
                    </button>
                    <button onclick="quickService('income')" class="p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors">
                        <div class="text-2xl mb-2">üìÑ</div>
                        <div class="text-sm font-medium">Certificates</div>
                    </button>
                    <button onclick="quickService('other')" class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <div class="text-2xl mb-2">‚öôÔ∏è</div>
                        <div class="text-sm font-medium">Other</div>
                    </button>
                </div>
            </div>

            <!-- Application History -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">‡§Ü‡§™‡§ï‡•Ä Application History</h3>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tracking ID</th>
                                <th>Service</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="userHistoryTable">
                            <!-- User applications will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noApplications" class="text-center py-8 hidden">
                    <div class="text-6xl mb-4">üìã</div>
                    <h4 class="text-xl font-semibold text-gray-600 mb-2">‡§ï‡•ã‡§à application ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä</h4>
                    <p class="text-gray-500 mb-4">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§Ü‡§™‡§®‡•á ‡§ï‡•ã‡§à service ‡§®‡§π‡•Ä‡§Ç ‡§≤‡•Ä ‡§π‡•à</p>
                    <button onclick="logoutUser(); setTimeout(() => document.querySelector('.service-card').scrollIntoView({behavior: 'smooth'}), 500)" class="btn btn-primary">
                        ‡§™‡§π‡§≤‡•Ä Service ‡§≤‡•á‡§Ç
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Service Modal -->
    <div id="serviceManagementModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="flex justify-between items-center mb-6">
                <h3 id="serviceModalTitle" class="text-2xl font-bold text-gray-800">Add New Service</h3>
                <button onclick="closeServiceModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="serviceManagementForm" onsubmit="saveService(event)">
                <div class="form-group">
                    <label class="form-label">Service Name *</label>
                    <input type="text" id="serviceName" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Service Icon</label>
                    <select id="serviceIconSelect" class="form-input">
                        <option value="üÜî">üÜî ID Card</option>
                        <option value="üí≥">üí≥ Credit Card</option>
                        <option value="üó≥Ô∏è">üó≥Ô∏è Ballot Box</option>
                        <option value="üçö">üçö Rice</option>
                        <option value="üìÑ">üìÑ Document</option>
                        <option value="‚öôÔ∏è">‚öôÔ∏è Gear</option>
                        <option value="üè¶">üè¶ Bank</option>
                        <option value="‚ö°">‚ö° Lightning</option>
                        <option value="üì±">üì± Mobile</option>
                        <option value="üîß">üîß Tools</option>
                        <option value="üíº">üíº Briefcase</option>
                        <option value="üéØ">üéØ Target</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Service Description</label>
                    <textarea id="serviceDescription" class="form-input" rows="3" 
                              placeholder="Brief description of the service"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Service Options (one per line)</label>
                    <textarea id="serviceOptions" class="form-input" rows="4" 
                              placeholder="Option 1&#10;Option 2&#10;Option 3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Price Range</label>
                    <input type="text" id="servicePrice" class="form-input" 
                           placeholder="‚Çπ50-200">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Service Image</label>
                    <input type="file" id="serviceImage" class="form-input" 
                           accept="image/*" onchange="handleServiceImageUpload(event)">
                    <p class="text-sm text-gray-500 mt-1">Upload service image (optional)</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select id="serviceStatus" class="form-input">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="btn btn-primary flex-1">
                        üíæ Save Service
                    </button>
                    <button type="button" onclick="closeServiceModal()" class="btn btn-secondary">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- File Upload Modal -->
    <div id="fileUploadModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">Upload Documents</h3>
                <button onclick="closeFileUploadModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div class="space-y-4">
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center" id="dropZone">
                    <div class="text-4xl mb-4">üìÅ</div>
                    <p class="text-gray-600 mb-4">Drag & drop files here or click to browse</p>
                    <input type="file" id="documentUpload" class="hidden" multiple 
                           accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(event)">
                    <button onclick="document.getElementById('documentUpload').click()" class="btn btn-primary">
                        Choose Files
                    </button>
                    <p class="text-sm text-gray-500 mt-2">Supported: PDF, JPG, PNG (Max 5MB each)</p>
                </div>
                
                <div id="uploadedFiles" class="space-y-2">
                    <!-- Uploaded files will appear here -->
                </div>
            </div>
            
            <div class="flex justify-end space-x-4 mt-6">
                <button onclick="closeFileUploadModal()" class="btn btn-secondary">Done</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden fixed inset-0 bg-gray-100 z-50 overflow-y-auto">
        <div class="container mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Admin Dashboard</h2>
                <button onclick="logoutAdmin()" class="btn btn-secondary">Logout</button>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="stats-card">
                    <h3 class="text-lg font-semibold mb-2">‡§ï‡•Å‡§≤ ‡§Ü‡§µ‡•á‡§¶‡§®</h3>
                    <p class="text-3xl font-bold" id="totalApplications">0</p>
                </div>
                <div class="stats-card">
                    <h3 class="text-lg font-semibold mb-2">‡§™‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó</h3>
                    <p class="text-3xl font-bold" id="pendingApplications">0</p>
                </div>
                <div class="stats-card">
                    <h3 class="text-lg font-semibold mb-2">‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó</h3>
                    <p class="text-3xl font-bold" id="processingApplications">0</p>
                </div>
                <div class="stats-card">
                    <h3 class="text-lg font-semibold mb-2">‡§™‡•Ç‡§∞‡•ç‡§£</h3>
                    <p class="text-3xl font-bold" id="completedApplications">0</p>
                </div>
            </div>

            <!-- Admin Tabs -->
            <div class="bg-white rounded-lg shadow-lg">
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6 overflow-x-auto">
                        <button onclick="showAdminTab('applications')" class="admin-tab-btn py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium whitespace-nowrap">
                            Applications
                        </button>
                        <button onclick="showAdminTab('services')" class="admin-tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                            Services
                        </button>
                        <button onclick="showAdminTab('herosection')" class="admin-tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                            Website Customizer
                        </button>
                        <button onclick="showAdminTab('users')" class="admin-tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                            Users
                        </button>
                        <button onclick="showAdminTab('settings')" class="admin-tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                            Settings
                        </button>
                        <button onclick="showAdminTab('googlesheets')" class="admin-tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                            Google Sheets
                        </button>
                    </nav>
                </div>

                <!-- Applications Tab -->
                <div id="applicationsTab" class="admin-section">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">All Applications</h3>
                        <div class="flex space-x-2">
                            <select id="statusFilter" onchange="filterApplications()" class="form-input">
                                <option value="">All Status</option>
                                <option value="‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§">Pending</option>
                                <option value="‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç">Processing</option>
                                <option value="‡§™‡•Ç‡§∞‡•ç‡§£">Completed</option>
                            </select>
                            <button onclick="exportData()" class="btn btn-secondary">Export CSV</button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Tracking ID</th>
                                    <th>Name</th>
                                    <th>Service</th>
                                    <th>Mobile</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="applicationsTableBody">
                                <!-- Applications will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Services Tab -->
                <div id="servicesTab" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold">Services Management</h3>
                        <button onclick="showAddServiceModal()" class="btn btn-primary">
                            ‚ûï Add New Service
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="servicesGrid">
                        <!-- Services will be loaded here -->
                    </div>
                </div>

                <!-- Website Customizer Tab -->
                <div id="herosectionTab" class="admin-section hidden">
                    <h3 class="text-xl font-bold mb-6">Website Customizer</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Settings Panel -->
                        <div class="space-y-6">
                            <!-- Hero Section Settings -->
                            <div class="bg-gray-50 p-6 rounded-lg">
                                <h4 class="font-semibold mb-4">üéØ Hero Section</h4>
                                
                                <div class="form-group">
                                    <label class="form-label">Hero Title</label>
                                    <input type="text" id="heroTitle" class="form-input" 
                                           value="‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π"
                                           placeholder="Enter hero title">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Hero Subtitle</label>
                                    <textarea id="heroSubtitle" class="form-input" rows="3" 
                                              placeholder="Enter hero subtitle">‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Hero Icon</label>
                                    <select id="heroIcon" class="form-input">
                                        <option value="üíº">üíº Briefcase</option>
                                        <option value="üè™">üè™ Store</option>
                                        <option value="üìã">üìã Clipboard</option>
                                        <option value="‚ö°">‚ö° Lightning</option>
                                        <option value="üéØ">üéØ Target</option>
                                        <option value="üîß">üîß Tools</option>
                                        <option value="üì±">üì± Mobile</option>
                                        <option value="üíª">üíª Computer</option>
                                        <option value="üåü">üåü Star</option>
                                        <option value="üöÄ">üöÄ Rocket</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Background Image</label>
                                    <input type="file" id="heroBackground" class="form-input" 
                                           accept="image/*" onchange="handleHeroImageUpload(event)">
                                    <p class="text-sm text-gray-500 mt-1">Upload background image (optional)</p>
                                </div>
                            </div>

                            <!-- Header Settings -->
                            <div class="bg-gray-50 p-6 rounded-lg">
                                <h4 class="font-semibold mb-4">üè¢ Header Settings</h4>
                                
                                <div class="form-group">
                                    <label class="form-label">Store Name</label>
                                    <input type="text" id="storeName" class="form-input" 
                                           value="Mushtaq Store"
                                           placeholder="Enter store name">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Store Tagline</label>
                                    <input type="text" id="storeTagline" class="form-input" 
                                           value="Digital Services & Solutions"
                                           placeholder="Enter store tagline">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Store Icon</label>
                                    <select id="storeIcon" class="form-input">
                                        <option value="üè™">üè™ Store</option>
                                        <option value="üè¢">üè¢ Office</option>
                                        <option value="üíº">üíº Business</option>
                                        <option value="üéØ">üéØ Target</option>
                                        <option value="‚ö°">‚ö° Lightning</option>
                                        <option value="üîß">üîß Service</option>
                                        <option value="üì±">üì± Digital</option>
                                        <option value="üíª">üíª Tech</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Contact Settings -->
                            <div class="bg-gray-50 p-6 rounded-lg">
                                <h4 class="font-semibold mb-4">üìû Contact Information</h4>
                                
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" id="contactPhone" class="form-input" 
                                           value="+91 93550 22066"
                                           placeholder="Enter phone number">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Address</label>
                                    <textarea id="contactAddress" class="form-input" rows="2" 
                                              placeholder="Enter address">Mushtaq Store, Main Market</textarea>
                                </div>
                            </div>
                                
                            <div class="flex space-x-4">
                                <button onclick="saveWebsiteSettings()" class="btn btn-primary">
                                    üíæ Save All Changes
                                </button>
                                <button onclick="resetWebsiteSettings()" class="btn btn-secondary">
                                    üîÑ Reset to Default
                                </button>
                                <button onclick="previewWebsite()" class="btn btn-secondary">
                                    üëÅÔ∏è Full Preview
                                </button>
                            </div>
                        </div>
                        
                        <!-- Live Preview -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="font-semibold">üñ•Ô∏è Live Website Preview</h4>
                                <button onclick="refreshPreview()" class="text-blue-600 hover:text-blue-800 text-sm">
                                    üîÑ Refresh
                                </button>
                            </div>
                            <div class="border-2 border-gray-300 rounded-lg bg-white overflow-hidden" style="height: 600px;">
                                <iframe id="websitePreview" src="about:blank" class="w-full h-full border-0" 
                                        style="transform: scale(0.7); transform-origin: top left; width: 142.86%; height: 142.86%;">
                                </iframe>
                            </div>
                            <p class="text-xs text-gray-500 mt-2 text-center">
                                Preview shows your website at 70% scale. Click "Full Preview" for actual size.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div id="usersTab" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">Registered Users</h3>
                        <div class="flex space-x-2">
                            <button onclick="exportUsers()" class="btn btn-secondary">Export Users CSV</button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Mobile</th>
                                    <th>Registered Date</th>
                                    <th>Last Login</th>
                                    <th>Total Applications</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settingsTab" class="admin-section hidden">
                    <h3 class="text-xl font-bold mb-4">System Settings</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-2">Contact Information</h4>
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" id="contactPhone" class="form-input" value="+91 93550 22066">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Address</label>
                                <textarea id="contactAddress" class="form-input" rows="3">Mushtaq Store, Main Market</textarea>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-2">Service Pricing</h4>
                            <div class="form-group">
                                <label class="form-label">Aadhaar Services (‚Çπ)</label>
                                <input type="text" id="aadhaarPrice" class="form-input" value="50-200">
                            </div>
                            <div class="form-group">
                                <label class="form-label">PAN Card Services (‚Çπ)</label>
                                <input type="text" id="panPrice" class="form-input" value="100-300">
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="saveSettings()" class="btn btn-primary mt-4">Save Settings</button>
                </div>

                <!-- Google Sheets Tab -->
                <div id="googlesheetsTab" class="admin-section hidden">
                    <h3 class="text-xl font-bold mb-4">Google Sheets Integration</h3>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h4 class="font-semibold text-blue-800 mb-2">Current Configuration</h4>
                        <p class="text-sm text-blue-700 mb-2">
                            <strong>Apps Script URL:</strong><br>
                            <code class="bg-white px-2 py-1 rounded text-xs">https://script.google.com/macros/s/AKfycbwvHHNlME_FyFQGlG-LLEN8CdvzMlF7b2autQ5lIMBrSCyDOWH1FBK5jVQcH8-DTLHb/exec</code>
                        </p>
                        <p class="text-sm text-blue-700">
                            <strong>Sheet ID:</strong><br>
                            <code class="bg-white px-2 py-1 rounded text-xs">1jZDzT8Iy1XF1pV0fm0kS-XxxAg3T1_wxss89fy_qx5A</code>
                        </p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Google Apps Script URL</label>
                        <input type="url" id="googleScriptUrl" class="form-input" 
                               value="https://script.google.com/macros/s/AKfycbwvHHNlME_FyFQGlG-LLEN8CdvzMlF7b2autQ5lIMBrSCyDOWH1FBK5jVQcH8-DTLHb/exec"
                               placeholder="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Google Sheet ID</label>
                        <input type="text" id="googleSheetId" class="form-input" 
                               value="1jZDzT8Iy1XF1pV0fm0kS-XxxAg3T1_wxss89fy_qx5A"
                               placeholder="1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms">
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="saveGoogleSheetsConfig()" class="btn btn-primary">Save Configuration</button>
                        <button onclick="testGoogleSheets()" class="btn btn-secondary">Test Connection</button>
                    </div>

                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold mb-2">Apps Script Code</h4>
                        <p class="text-sm text-gray-600 mb-2">Copy this code to your Google Apps Script:</p>
                        <pre class="bg-gray-800 text-green-400 p-4 rounded text-xs overflow-x-auto"><code>function doPost(e) {
  try {
    const SHEET_ID = '1jZDzT8Iy1XF1pV0fm0kS-XxxAg3T1_wxss89fy_qx5A';
    const sheet = SpreadsheetApp.openById(SHEET_ID).getActiveSheet();
    
    const data = JSON.parse(e.postData.contents);
    
    sheet.appendRow([
      new Date().toLocaleString('hi-IN'),
      data.trackingId || '',
      data.serviceType || '',
      data.fullName || '',
      data.mobile || '',
      data.email || '',
      data.address || '',
      data.status || '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§',
      data.fatherName || '',
      data.dob || '',
      data.aadhaarNumber || ''
    ]);
    
    return ContentService
      .createTextOutput(JSON.stringify({success: true}))
      .setMimeType(ContentService.MimeType.JSON);
      
  } catch (error) {
    return ContentService
      .createTextOutput(JSON.stringify({success: false, error: error.toString()}))
      .setMimeType(ContentService.MimeType.JSON);
  }
}

function doGet() {
  return ContentService.createTextOutput('Apps Script is working!');
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentService = '';
        let applications = JSON.parse(localStorage.getItem('applications') || '[]');
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
        let isAdminLoggedIn = false;
        let isUserLoggedIn = false;
        let customServices = JSON.parse(localStorage.getItem('customServices') || '[]');
        let heroSettings = JSON.parse(localStorage.getItem('heroSettings') || '{}');
        let currentEditingService = null;
        let uploadedDocuments = [];

        // Google Sheets Configuration
        const GOOGLE_SHEETS_CONFIG = {
            scriptUrl: 'https://script.google.com/macros/s/AKfycbwvHHNlME_FyFQGlG-LLEN8CdvzMlF7b2autQ5lIMBrSCyDOWH1FBK5jVQcH8-DTLHb/exec',
            sheetId: '1jZDzT8Iy1XF1pV0fm0kS-XxxAg3T1_wxss89fy_qx5A'
        };

        // Check if user is logged in before opening service
        function checkLoginAndOpenService(service) {
            if (!isUserLoggedIn || !currentUser) {
                showNotification('‚ö†Ô∏è ‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§π‡§≤‡•á Login ‡§ï‡§∞‡•á‡§Ç!', 'error');
                setTimeout(() => {
                    showUserLogin();
                }, 1000);
                return;
            }
            openServiceForm(service);
        }

        // Service configurations
        const serviceConfigs = {
            aadhaar: {
                title: '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§®‡§Ø‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°',
                    '‡§Ü‡§ß‡§æ‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü/‡§∏‡•Å‡§ß‡§æ‡§∞',
                    '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≤‡§ø‡§Ç‡§ï',
                    '‡§Ü‡§ß‡§æ‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°',
                    '‡§¨‡§æ‡§Ø‡•ã‡§Æ‡•á‡§ü‡•ç‡§∞‡§ø‡§ï ‡§Ö‡§™‡§°‡•á‡§ü'
                ],
                fields: [
                    { id: 'fatherName', label: '‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ', type: 'text', required: true },
                    { id: 'dob', label: '‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø', type: 'date', required: true },
                    { id: 'aadhaarNumber', label: '‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞ (‡§Ø‡§¶‡§ø ‡§π‡•à)', type: 'text', required: false }
                ]
            },
            pan: {
                title: '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§®‡§Ø‡§æ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°',
                    '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•Å‡§ß‡§æ‡§∞',
                    '‡§°‡•Å‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§ü ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°',
                    '‡§™‡•à‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï'
                ],
                fields: [
                    { id: 'fatherName', label: '‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ', type: 'text', required: true },
                    { id: 'dob', label: '‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø', type: 'date', required: true },
                    { id: 'panNumber', label: '‡§™‡•à‡§® ‡§®‡§Ç‡§¨‡§∞ (‡§Ø‡§¶‡§ø ‡§π‡•à)', type: 'text', required: false }
                ]
            },
            voter: {
                title: '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§®‡§à ‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä',
                    '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞',
                    '‡§™‡§§‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ',
                    '‡§°‡•Å‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§ü ‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä'
                ],
                fields: [
                    { id: 'fatherName', label: '‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ', type: 'text', required: true },
                    { id: 'dob', label: '‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø', type: 'date', required: true },
                    { id: 'constituency', label: '‡§®‡§ø‡§∞‡•ç‡§µ‡§æ‡§ö‡§® ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞', type: 'text', required: true }
                ]
            },
            ration: {
                title: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§®‡§Ø‡§æ ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§°',
                    '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•Å‡§ß‡§æ‡§∞',
                    '‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡§®‡§æ',
                    '‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡§ü‡§æ‡§®‡§æ',
                    '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞'
                ],
                fields: [
                    { id: 'fatherName', label: '‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ', type: 'text', required: true },
                    { id: 'familyMembers', label: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø', type: 'number', required: true },
                    { id: 'rationCard', label: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç‡§¨‡§∞ (‡§Ø‡§¶‡§ø ‡§π‡•à)', type: 'text', required: false }
                ]
            },
            income: {
                title: '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞',
                    '‡§ú‡§æ‡§§‡§ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞',
                    '‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞',
                    '‡§ö‡§∞‡§ø‡§§‡•ç‡§∞ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞'
                ],
                fields: [
                    { id: 'fatherName', label: '‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ', type: 'text', required: true },
                    { id: 'occupation', label: '‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø', type: 'text', required: true },
                    { id: 'annualIncome', label: '‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§Ü‡§Ø', type: 'text', required: false }
                ]
            },
            other: {
                title: '‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                options: [
                    '‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§ñ‡•ã‡§≤‡§®‡§æ',
                    '‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®',
                    '‡§ó‡•à‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®',
                    '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∞‡§ø‡§ö‡§æ‡§∞‡•ç‡§ú',
                    '‡§¨‡•Ä‡§Æ‡§æ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç'
                ],
                fields: [
                    { id: 'bankAccount', label: '‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§®‡§Ç‡§¨‡§∞', type: 'text', required: false },
                    { id: 'ifsc', label: 'IFSC ‡§ï‡•ã‡§°', type: 'text', required: false }
                ]
            }
        };

        // Utility Functions
        function generateTrackingId() {
            const prefix = 'MS';
            const timestamp = Date.now().toString().slice(-6);
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `${prefix}-${timestamp}${random}`;
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('hi-IN');
        }

        // Modal Functions
        function openServiceForm(service) {
            currentService = service;
            
            // Check if it's a custom service
            const customService = customServices.find(s => s.id === service);
            const config = customService || serviceConfigs[service];
            
            if (!config) {
                showNotification('Service configuration not found!', 'error');
                return;
            }
            
            document.getElementById('modalTitle').textContent = customService ? customService.name : config.title;
            
            // Show/hide back to dashboard button based on user login status
            const backBtn = document.getElementById('backToDashboardBtn');
            if (isUserLoggedIn && currentUser) {
                backBtn.style.display = 'block';
                // Pre-fill user details if logged in
                if (currentUser.name) document.getElementById('fullName').value = currentUser.name;
                if (currentUser.mobile) document.getElementById('mobile').value = currentUser.mobile;
            } else {
                backBtn.style.display = 'none';
            }
            
            // Populate service options
            const serviceSelect = document.getElementById('serviceType');
            serviceSelect.innerHTML = '<option value="">‡§∏‡•á‡§µ‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>';
            
            const options = customService ? customService.options : config.options;
            if (options && options.length > 0) {
                options.forEach(option => {
                    serviceSelect.innerHTML += `<option value="${option}">${option}</option>`;
                });
            }
            
            // Generate dynamic fields
            const dynamicFields = document.getElementById('dynamicFields');
            dynamicFields.innerHTML = '';
            
            const fields = customService ? [] : (config.fields || []);
            fields.forEach(field => {
                const fieldHtml = `
                    <div class="form-group">
                        <label class="form-label">${field.label} ${field.required ? '*' : ''}</label>
                        <input type="${field.type}" id="${field.id}" class="form-input" ${field.required ? 'required' : ''}>
                    </div>
                `;
                dynamicFields.innerHTML += fieldHtml;
            });
            
            document.getElementById('serviceModal').classList.add('show');
        }

        function backToDashboard() {
            closeModal();
            showUserDashboard();
        }

        function closeModal() {
            document.getElementById('serviceModal').classList.remove('show');
            document.getElementById('serviceForm').reset();
            // Keep header as is - no changes needed
        }

        function showTrackingModal() {
            document.getElementById('trackingModal').classList.add('show');
        }

        function closeTrackingModal() {
            document.getElementById('trackingModal').classList.remove('show');
            document.getElementById('trackingResult').classList.add('hidden');
        }

        function showAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('show');
        }

        function closeAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('show');
        }

        // Form Submission
        async function submitForm(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submitText');
            const loader = document.getElementById('submitLoader');
            
            submitBtn.textContent = '‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            loader.classList.remove('hidden');
            
            try {
                const formData = new FormData(event.target);
                const trackingId = generateTrackingId();
                
                // Collect all form data
                const applicationData = {
                    trackingId: trackingId,
                    serviceType: document.getElementById('serviceType').value,
                    fullName: document.getElementById('fullName').value,
                    mobile: document.getElementById('mobile').value,
                    email: document.getElementById('email').value,
                    address: document.getElementById('address').value,
                    timestamp: new Date().toISOString(),
                    status: '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§',
                    userId: currentUser ? currentUser.id : null
                };
                
                // Add dynamic fields
                const config = serviceConfigs[currentService];
                config.fields.forEach(field => {
                    const element = document.getElementById(field.id);
                    if (element) {
                        applicationData[field.id] = element.value;
                    }
                });
                
                // Add uploaded documents
                if (uploadedDocuments.length > 0) {
                    applicationData.uploadedDocuments = uploadedDocuments;
                }
                
                // If user is logged in, auto-fill their details and create user if needed
                if (isUserLoggedIn && currentUser) {
                    applicationData.userId = currentUser.id;
                } else {
                    // Check if user exists with this mobile number
                    const mobile = applicationData.mobile;
                    let user = users.find(u => u.mobile === mobile);
                    
                    if (!user) {
                        // Create new user automatically
                        user = {
                            id: Date.now().toString(),
                            name: applicationData.fullName,
                            mobile: mobile,
                            registeredDate: new Date().toISOString(),
                            lastLogin: new Date().toISOString()
                        };
                        users.push(user);
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                    applicationData.userId = user.id;
                }
                
                // Save to local storage
                applications.push(applicationData);
                localStorage.setItem('applications', JSON.stringify(applications));
                
                // Submit to Google Sheets
                await submitToGoogleSheets(applicationData);
                
                showNotification(`‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•Å‡§Ü! ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§à‡§°‡•Ä: ${trackingId}`);
                
                // Clear uploaded documents
                uploadedDocuments = [];
                document.getElementById('serviceUploadedFiles').innerHTML = '';
                
                closeModal();
                
                // If user is logged in, refresh their dashboard and show it
                if (isUserLoggedIn && currentUser) {
                    setTimeout(() => {
                        showUserDashboard();
                        loadUserData();
                    }, 1000);
                }
                
            } catch (error) {
                console.error('Submission error:', error);
                showNotification('‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');
            } finally {
                submitBtn.textContent = '‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç';
                loader.classList.add('hidden');
            }
        }

        // Google Sheets Integration
        async function submitToGoogleSheets(data) {
            try {
                const sheetData = {
                    timestamp: new Date().toLocaleString('hi-IN'),
                    trackingId: data.trackingId,
                    serviceType: data.serviceType,
                    fullName: data.fullName,
                    mobile: data.mobile,
                    email: data.email || '',
                    address: data.address,
                    status: data.status,
                    fatherName: data.fatherName || '',
                    dob: data.dob || '',
                    aadhaarNumber: data.aadhaarNumber || '',
                    panNumber: data.panNumber || '',
                    constituency: data.constituency || '',
                    familyMembers: data.familyMembers || '',
                    rationCard: data.rationCard || '',
                    occupation: data.occupation || '',
                    annualIncome: data.annualIncome || '',
                    bankAccount: data.bankAccount || '',
                    ifsc: data.ifsc || ''
                };

                const response = await fetch(GOOGLE_SHEETS_CONFIG.scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(sheetData)
                });

                console.log('Data submitted to Google Sheets');
                
            } catch (error) {
                console.error('Google Sheets submission error:', error);
                // Don't throw error to prevent blocking local storage
            }
        }

        // Application Tracking
        function trackApplication(event) {
            event.preventDefault();
            
            const trackingId = document.getElementById('trackingId').value.trim();
            const mobile = document.getElementById('trackingMobile').value.trim();
            
            const application = applications.find(app => 
                app.trackingId === trackingId && app.mobile === mobile
            );
            
            const resultDiv = document.getElementById('trackingResult');
            
            if (application) {
                resultDiv.innerHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h4 class="font-bold text-green-800 mb-2">‡§Ü‡§µ‡•á‡§¶‡§® ‡§Æ‡§ø‡§≤‡§æ!</h4>
                        <div class="space-y-2 text-sm">
                            <p><strong>‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§à‡§°‡•Ä:</strong> ${application.trackingId}</p>
                            <p><strong>‡§®‡§æ‡§Æ:</strong> ${application.fullName}</p>
                            <p><strong>‡§∏‡•á‡§µ‡§æ:</strong> ${application.serviceType}</p>
                            <p><strong>‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</strong> ${formatDate(application.timestamp)}</p>
                            <p><strong>‡§∏‡•ç‡§•‡§ø‡§§‡§ø:</strong> <span class="status-badge status-${application.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'pending' : application.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'processing' : 'completed'}">${application.status}</span></p>
                        </div>
                    </div>
                `;
                resultDiv.classList.remove('hidden');
            } else {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <h4 class="font-bold text-red-800 mb-2">‡§Ü‡§µ‡•á‡§¶‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</h4>
                        <p class="text-sm text-red-600">‡§ï‡•É‡§™‡§Ø‡§æ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§à‡§°‡•Ä ‡§î‡§∞ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                    </div>
                `;
                resultDiv.classList.remove('hidden');
            }
        }

        // User Functions
        function showUserLogin() {
            document.getElementById('userLoginModal').classList.add('show');
        }

        function closeUserLogin() {
            document.getElementById('userLoginModal').classList.remove('show');
        }

        function userLogin(event) {
            event.preventDefault();
            
            const name = document.getElementById('userName').value.trim();
            const mobile = document.getElementById('userMobile').value.trim();
            
            if (!name || !mobile) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            if (mobile.length !== 10) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            // Check if user exists with exact name and mobile combination
            let user = users.find(u => u.mobile === mobile && u.name.toLowerCase() === name.toLowerCase());
            
            if (!user) {
                // Check if mobile exists with different name
                const existingMobile = users.find(u => u.mobile === mobile);
                
                if (existingMobile) {
                    showNotification(`‚ùå ‡§á‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•á ‡§™‡§π‡§≤‡•á "${existingMobile.name}" ‡§®‡§æ‡§Æ ‡§∏‡•á account ‡§¨‡§®‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§π‡•Ä ‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§Ö‡§≤‡§ó ‡§®‡§Ç‡§¨‡§∞ use ‡§ï‡§∞‡•á‡§Ç‡•§`, 'error');
                    return;
                }
                
                // Create new user - first time registration
                user = {
                    id: Date.now().toString(),
                    name: name,
                    mobile: mobile,
                    registeredDate: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));
                showNotification(`üéâ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${name}! ‡§Ü‡§™‡§ï‡§æ ‡§®‡§Ø‡§æ account ‡§¨‡§® ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§`);
            } else {
                // Existing user with correct name and mobile
                user.lastLogin = new Date().toISOString();
                localStorage.setItem('users', JSON.stringify(users));
                showNotification(`üè† ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§µ‡§æ‡§™‡§∏‡•Ä ${name}! ‡§Ü‡§™‡§ï‡•Ä history load ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...`);
            }
            
            // Set current user
            currentUser = user;
            isUserLoggedIn = true;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            closeUserLogin();
            updateHeaderForLoggedInUser();
            showUserDashboard();
        }

        function showUserDashboard() {
            document.getElementById('userDashboard').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Update user name in dashboard
            document.getElementById('currentUserName').textContent = currentUser.name;
            
            // Load user data
            loadUserData();
        }

        function logoutUser() {
            isUserLoggedIn = false;
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('userDashboard').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Reset header to original state
            const headerButtons = document.querySelector('header .flex.items-center.space-x-4');
            headerButtons.innerHTML = `
                <button onclick="showUserLogin()" class="btn btn-secondary">
                    üë§ User Login
                </button>
                <button onclick="showTrackingModal()" class="btn btn-secondary">
                    üìã Track Application
                </button>
                <button onclick="showAdminLogin()" class="btn btn-secondary">
                    üîß Admin
                </button>
            `;
            
            showNotification('Successfully logged out!');
        }

        function loadUserData() {
            // Get user's applications
            const userApps = applications.filter(app => app.mobile === currentUser.mobile);
            
            // Update stats
            const total = userApps.length;
            const pending = userApps.filter(app => app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' || app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç').length;
            const completed = userApps.filter(app => app.status === '‡§™‡•Ç‡§∞‡•ç‡§£').length;
            
            document.getElementById('userTotalApps').textContent = total;
            document.getElementById('userPendingApps').textContent = pending;
            document.getElementById('userCompletedApps').textContent = completed;
            
            // Load history table
            loadUserHistory(userApps);
        }

        function loadUserHistory(userApps) {
            const tbody = document.getElementById('userHistoryTable');
            const noAppsDiv = document.getElementById('noApplications');
            
            if (userApps.length === 0) {
                tbody.innerHTML = '';
                noAppsDiv.classList.remove('hidden');
                return;
            }
            
            noAppsDiv.classList.add('hidden');
            tbody.innerHTML = '';
            
            // Sort by date (newest first)
            userApps.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            userApps.forEach(app => {
                const statusClass = app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'pending' : 
                                  app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'processing' : 'completed';
                
                const row = `
                    <tr>
                        <td class="font-mono text-sm">${app.trackingId}</td>
                        <td>${app.serviceType}</td>
                        <td>${formatDate(app.timestamp)}</td>
                        <td><span class="status-badge status-${statusClass}">${app.status}</span></td>
                        <td>
                            <button onclick="viewUserApplication('${app.trackingId}')" class="text-blue-600 hover:text-blue-800">
                                View Details
                            </button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function quickService(service) {
            // Close user dashboard and open service form directly
            document.getElementById('userDashboard').classList.add('hidden');
            document.body.style.overflow = 'auto';
            setTimeout(() => {
                openServiceForm(service);
            }, 300);
        }

        function updateHeaderForLoggedInUser() {
            const headerButtons = document.querySelector('header .flex.items-center.space-x-4');
            if (currentUser && isUserLoggedIn) {
                headerButtons.innerHTML = `
                    <div class="text-right mr-4">
                        <p class="text-sm text-blue-100">Welcome back!</p>
                        <p class="font-semibold">${currentUser.name}</p>
                    </div>
                    <button onclick="showUserDashboard()" class="btn btn-secondary">
                        üìä Dashboard
                    </button>
                    <button onclick="showTrackingModal()" class="btn btn-secondary">
                        üìã Track Application
                    </button>
                    <button onclick="logoutUser()" class="btn btn-secondary">
                        üö™ Logout
                    </button>
                `;
            }
        }

        function viewUserApplication(trackingId) {
            const app = applications.find(a => a.trackingId === trackingId);
            if (!app) return;
            
            const modalContent = `
                <div class="modal show" style="display: flex; align-items: center; justify-content: center;">
                    <div class="modal-content">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-800">Application Details</h3>
                            <button onclick="this.closest('.modal').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="font-semibold text-gray-700">Tracking ID:</label>
                                    <p class="font-mono text-sm bg-gray-100 p-2 rounded">${app.trackingId}</p>
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">Status:</label>
                                    <p><span class="status-badge status-${app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'pending' : app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'processing' : 'completed'}">${app.status}</span></p>
                                </div>
                            </div>
                            
                            <div>
                                <label class="font-semibold text-gray-700">Service Type:</label>
                                <p>${app.serviceType}</p>
                            </div>
                            
                            <div>
                                <label class="font-semibold text-gray-700">Application Date:</label>
                                <p>${formatDate(app.timestamp)}</p>
                            </div>
                            
                            <div>
                                <label class="font-semibold text-gray-700">Full Name:</label>
                                <p>${app.fullName}</p>
                            </div>
                            
                            <div>
                                <label class="font-semibold text-gray-700">Mobile:</label>
                                <p>${app.mobile}</p>
                            </div>
                            
                            ${app.email ? `
                            <div>
                                <label class="font-semibold text-gray-700">Email:</label>
                                <p>${app.email}</p>
                            </div>
                            ` : ''}
                            
                            <div>
                                <label class="font-semibold text-gray-700">Address:</label>
                                <p>${app.address}</p>
                            </div>
                            
                            ${app.fatherName ? `
                            <div>
                                <label class="font-semibold text-gray-700">Father's Name:</label>
                                <p>${app.fatherName}</p>
                            </div>
                            ` : ''}
                            
                            ${app.dob ? `
                            <div>
                                <label class="font-semibold text-gray-700">Date of Birth:</label>
                                <p>${app.dob}</p>
                            </div>
                            ` : ''}
                        </div>
                        
                        <div class="mt-6 flex justify-end">
                            <button onclick="this.closest('.modal').remove()" class="btn btn-secondary">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalContent);
        }

        // Admin Functions
        function adminLogin(event) {
            event.preventDefault();
            
            const adminId = document.getElementById('adminId').value;
            const password = document.getElementById('adminPassword').value;
            
            // Simple admin credentials (in production, use proper authentication)
            if (adminId === '2206' && password === '9355') {
                isAdminLoggedIn = true;
                closeAdminLogin();
                showAdminDashboard();
                loadAdminData();
            } else {
                showNotification('‡§ó‡§≤‡§§ Admin ID ‡§Ø‡§æ Password', 'error');
            }
        }

        function showAdminDashboard() {
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function logoutAdmin() {
            isAdminLoggedIn = false;
            document.getElementById('adminDashboard').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showAdminTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.admin-section').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active class to clicked tab button
            event.target.classList.remove('border-transparent', 'text-gray-500');
            event.target.classList.add('border-blue-500', 'text-blue-600');
        }

        function loadAdminData() {
            updateStats();
            loadApplicationsTable();
            loadUsersTable();
            loadServicesGrid();
        }

        function updateStats() {
            const total = applications.length;
            const pending = applications.filter(app => app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§').length;
            const processing = applications.filter(app => app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç').length;
            const completed = applications.filter(app => app.status === '‡§™‡•Ç‡§∞‡•ç‡§£').length;
            
            document.getElementById('totalApplications').textContent = total;
            document.getElementById('pendingApplications').textContent = pending;
            document.getElementById('processingApplications').textContent = processing;
            document.getElementById('completedApplications').textContent = completed;
        }

        function loadApplicationsTable() {
            const tbody = document.getElementById('applicationsTableBody');
            tbody.innerHTML = '';
            
            applications.forEach(app => {
                const row = `
                    <tr>
                        <td class="font-mono text-sm">${app.trackingId}</td>
                        <td>${app.fullName}</td>
                        <td>${app.serviceType}</td>
                        <td>${app.mobile}</td>
                        <td>${formatDate(app.timestamp)}</td>
                        <td>
                            <select onchange="updateStatus('${app.trackingId}', this.value)" class="status-badge status-${app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'pending' : app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'processing' : 'completed'}">
                                <option value="‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§" ${app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'selected' : ''}>Pending</option>
                                <option value="‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç" ${app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'selected' : ''}>Processing</option>
                                <option value="‡§™‡•Ç‡§∞‡•ç‡§£" ${app.status === '‡§™‡•Ç‡§∞‡•ç‡§£' ? 'selected' : ''}>Completed</option>
                            </select>
                        </td>
                        <td>
                            <button onclick="viewApplication('${app.trackingId}')" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                            <button onclick="deleteApplication('${app.trackingId}')" class="text-red-600 hover:text-red-800">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function updateStatus(trackingId, newStatus) {
            const appIndex = applications.findIndex(app => app.trackingId === trackingId);
            if (appIndex !== -1) {
                applications[appIndex].status = newStatus;
                localStorage.setItem('applications', JSON.stringify(applications));
                updateStats();
                showNotification('‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§à');
            }
        }

        function deleteApplication(trackingId) {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
                applications = applications.filter(app => app.trackingId !== trackingId);
                localStorage.setItem('applications', JSON.stringify(applications));
                loadAdminData();
                showNotification('‡§Ü‡§µ‡•á‡§¶‡§® ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ');
            }
        }

        function filterApplications() {
            const filter = document.getElementById('statusFilter').value;
            const rows = document.querySelectorAll('#applicationsTableBody tr');
            
            rows.forEach(row => {
                if (!filter || row.innerHTML.includes(filter)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function loadUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const userApps = applications.filter(app => app.mobile === user.mobile);
                const totalApps = userApps.length;
                
                const row = `
                    <tr>
                        <td class="font-mono text-sm">${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.mobile}</td>
                        <td>${formatDate(user.registeredDate)}</td>
                        <td>${formatDate(user.lastLogin)}</td>
                        <td class="text-center">
                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">
                                ${totalApps}
                            </span>
                        </td>
                        <td>
                            <button onclick="viewUserDetails('${user.id}')" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                            <button onclick="deleteUser('${user.id}')" class="text-red-600 hover:text-red-800">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function viewUserDetails(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            
            const userApps = applications.filter(app => app.mobile === user.mobile);
            
            const modalContent = `
                <div class="modal show" style="display: flex; align-items: center; justify-content: center;">
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-800">User Details</h3>
                            <button onclick="this.closest('.modal').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                        
                        <div class="space-y-4 mb-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="font-semibold text-gray-700">User ID:</label>
                                    <p class="font-mono text-sm bg-gray-100 p-2 rounded">${user.id}</p>
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">Name:</label>
                                    <p>${user.name}</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="font-semibold text-gray-700">Mobile:</label>
                                    <p>${user.mobile}</p>
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">Total Applications:</label>
                                    <p class="font-bold text-blue-600">${userApps.length}</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="font-semibold text-gray-700">Registered:</label>
                                    <p>${formatDate(user.registeredDate)}</p>
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">Last Login:</label>
                                    <p>${formatDate(user.lastLogin)}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <h4 class="font-semibold text-gray-700 mb-3">Recent Applications:</h4>
                            ${userApps.length > 0 ? `
                                <div class="space-y-2 max-h-40 overflow-y-auto">
                                    ${userApps.slice(0, 5).map(app => `
                                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                            <div>
                                                <span class="font-mono text-xs text-gray-600">${app.trackingId}</span>
                                                <p class="text-sm">${app.serviceType}</p>
                                            </div>
                                            <div class="text-right">
                                                <span class="status-badge status-${app.status === '‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§' ? 'pending' : app.status === '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç' ? 'processing' : 'completed'}">${app.status}</span>
                                                <p class="text-xs text-gray-500">${formatDate(app.timestamp)}</p>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : '<p class="text-gray-500 text-sm">No applications yet</p>'}
                        </div>
                        
                        <div class="mt-6 flex justify-end">
                            <button onclick="this.closest('.modal').remove()" class="btn btn-secondary">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalContent);
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user? This will also delete all their applications.')) {
                const user = users.find(u => u.id === userId);
                if (user) {
                    // Remove user
                    users = users.filter(u => u.id !== userId);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    // Remove user's applications
                    applications = applications.filter(app => app.mobile !== user.mobile);
                    localStorage.setItem('applications', JSON.stringify(applications));
                    
                    loadAdminData();
                    showNotification('User and their applications deleted successfully');
                }
            }
        }

        function exportUsers() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "User ID,Name,Mobile,Registered Date,Last Login,Total Applications\n"
                + users.map(user => {
                    const userApps = applications.filter(app => app.mobile === user.mobile);
                    return `${user.id},${user.name},${user.mobile},${formatDate(user.registeredDate)},${formatDate(user.lastLogin)},${userApps.length}`;
                }).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "mushtaq_store_users.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function exportData() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Tracking ID,Name,Service,Mobile,Email,Address,Date,Status\n"
                + applications.map(app => 
                    `${app.trackingId},${app.fullName},${app.serviceType},${app.mobile},${app.email || ''},${app.address},${formatDate(app.timestamp)},${app.status}`
                ).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "mushtaq_store_applications.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function saveSettings() {
            showNotification('‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à‡§Ç');
        }

        function saveGoogleSheetsConfig() {
            const scriptUrl = document.getElementById('googleScriptUrl').value.trim();
            const sheetId = document.getElementById('googleSheetId').value.trim();
            
            if (!scriptUrl) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ Apps Script URL ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            if (!sheetId) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ Google Sheet ID ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            // Validate Apps Script URL format
            if (!scriptUrl.includes('script.google.com/macros/s/') || !scriptUrl.includes('/exec')) {
                showNotification('‡§ó‡§≤‡§§ Apps Script URL format. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä URL ‡§°‡§æ‡§≤‡•á‡§Ç‡•§', 'error');
                return;
            }
            
            // Update global config
            GOOGLE_SHEETS_CONFIG.scriptUrl = scriptUrl;
            GOOGLE_SHEETS_CONFIG.sheetId = sheetId;
            
            // Save to localStorage
            localStorage.setItem('googleSheetsConfig', JSON.stringify(GOOGLE_SHEETS_CONFIG));
            
            showNotification('‚úÖ Google Sheets configuration saved successfully!');
        }

        async function testGoogleSheets() {
            const scriptUrl = document.getElementById('googleScriptUrl').value.trim();
            const sheetId = document.getElementById('googleSheetId').value.trim();
            
            if (!scriptUrl) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á Apps Script URL ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            if (!sheetId) {
                showNotification('‡§ï‡•É‡§™‡§Ø‡§æ Google Sheet ID ‡§°‡§æ‡§≤‡•á‡§Ç', 'error');
                return;
            }
            
            // Validate URL format
            if (!scriptUrl.includes('script.google.com/macros/s/') || !scriptUrl.includes('/exec')) {
                showNotification('‡§ó‡§≤‡§§ Apps Script URL format!', 'error');
                return;
            }
            
            try {
                showNotification('üîÑ Testing connection... ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç', 'info');
                
                // Create comprehensive test data
                const testData = {
                    timestamp: new Date().toLocaleString('hi-IN'),
                    trackingId: 'TEST-' + Date.now(),
                    serviceType: 'Connection Test',
                    fullName: 'Test User - Mushtaq Store',
                    mobile: '9999999999',
                    email: 'test@mushtaqstore.com',
                    address: 'Test Address for Connection',
                    status: 'Test Entry',
                    fatherName: 'Test Father',
                    dob: '1990-01-01',
                    aadhaarNumber: 'TEST123456789',
                    panNumber: '',
                    constituency: '',
                    familyMembers: '',
                    rationCard: '',
                    occupation: 'Testing',
                    annualIncome: '50000',
                    bankAccount: '',
                    ifsc: ''
                };
                
                // Send test data to Google Sheets
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                // Wait a moment for processing
                setTimeout(() => {
                    showNotification('‚úÖ Test successful! Check your Google Sheet - ‡§è‡§ï test row add ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ!', 'success');
                }, 2000);
                
            } catch (error) {
                console.error('Test error:', error);
                showNotification('‚ùå Test failed! Apps Script URL ‡§Ø‡§æ Sheet ID check ‡§ï‡§∞‡•á‡§Ç', 'error');
            }
        }

        // Service Management Functions
        function showAddServiceModal() {
            currentEditingService = null;
            document.getElementById('serviceModalTitle').textContent = 'Add New Service';
            document.getElementById('serviceManagementForm').reset();
            document.getElementById('serviceManagementModal').classList.add('show');
        }

        function editService(serviceId) {
            const service = customServices.find(s => s.id === serviceId);
            if (!service) return;
            
            currentEditingService = service;
            document.getElementById('serviceModalTitle').textContent = 'Edit Service';
            
            // Fill form with service data
            document.getElementById('serviceName').value = service.name;
            document.getElementById('serviceIconSelect').value = service.icon;
            document.getElementById('serviceDescription').value = service.description || '';
            document.getElementById('serviceOptions').value = service.options ? service.options.join('\n') : '';
            document.getElementById('servicePrice').value = service.price || '';
            document.getElementById('serviceStatus').value = service.status || 'active';
            
            document.getElementById('serviceManagementModal').classList.add('show');
        }

        function closeServiceModal() {
            document.getElementById('serviceManagementModal').classList.remove('show');
            currentEditingService = null;
        }

        function saveService(event) {
            event.preventDefault();
            
            const formData = {
                id: currentEditingService ? currentEditingService.id : Date.now().toString(),
                name: document.getElementById('serviceName').value.trim(),
                icon: document.getElementById('serviceIconSelect').value,
                description: document.getElementById('serviceDescription').value.trim(),
                options: document.getElementById('serviceOptions').value.trim().split('\n').filter(opt => opt.trim()),
                price: document.getElementById('servicePrice').value.trim(),
                status: document.getElementById('serviceStatus').value,
                createdAt: currentEditingService ? currentEditingService.createdAt : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            if (currentEditingService) {
                // Update existing service
                const index = customServices.findIndex(s => s.id === currentEditingService.id);
                if (index !== -1) {
                    customServices[index] = formData;
                }
            } else {
                // Add new service
                customServices.push(formData);
            }
            
            localStorage.setItem('customServices', JSON.stringify(customServices));
            loadServicesGrid();
            loadHomepageServices(); // Refresh homepage services
            closeServiceModal();
            
            showNotification(currentEditingService ? 'Service updated successfully!' : 'New service added successfully!');
        }

        function deleteService(serviceId) {
            if (confirm('Are you sure you want to delete this service?')) {
                customServices = customServices.filter(s => s.id !== serviceId);
                localStorage.setItem('customServices', JSON.stringify(customServices));
                loadServicesGrid();
                loadHomepageServices(); // Refresh homepage services
                showNotification('Service deleted successfully!');
            }
        }

        function toggleServiceStatus(serviceId) {
            const service = customServices.find(s => s.id === serviceId);
            if (service) {
                service.status = service.status === 'active' ? 'inactive' : 'active';
                localStorage.setItem('customServices', JSON.stringify(customServices));
                loadServicesGrid();
                loadHomepageServices(); // Refresh homepage services
                showNotification(`Service ${service.status === 'active' ? 'activated' : 'deactivated'}!`);
            }
        }

        function loadServicesGrid() {
            const grid = document.getElementById('servicesGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            // Show default services first
            const defaultServices = [
                { id: 'aadhaar', name: '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: 'üÜî', price: '‚Çπ50-200', status: 'active', isDefault: true },
                { id: 'pan', name: '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: 'üí≥', price: '‚Çπ100-300', status: 'active', isDefault: true },
                { id: 'voter', name: '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: 'üó≥Ô∏è', price: '‚Çπ80-250', status: 'active', isDefault: true },
                { id: 'ration', name: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: 'üçö', price: '‚Çπ100-400', status: 'active', isDefault: true },
                { id: 'income', name: '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: 'üìÑ', price: '‚Çπ150-500', status: 'active', isDefault: true },
                { id: 'other', name: '‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', icon: '‚öôÔ∏è', price: '‚Çπ50-1000', status: 'active', isDefault: true }
            ];
            
            [...defaultServices, ...customServices].forEach(service => {
                const serviceCard = `
                    <div class="bg-white rounded-lg shadow-lg p-6 border ${service.status === 'inactive' ? 'opacity-50' : ''}">
                        <div class="flex justify-between items-start mb-4">
                            <div class="text-3xl">${service.icon}</div>
                            <div class="flex space-x-2">
                                ${service.status === 'active' ? 
                                    '<span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Active</span>' : 
                                    '<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">Inactive</span>'
                                }
                            </div>
                        </div>
                        
                        <h4 class="font-bold text-lg mb-2">${service.name}</h4>
                        ${service.description ? `<p class="text-gray-600 text-sm mb-3">${service.description}</p>` : ''}
                        ${service.price ? `<p class="text-green-600 font-bold mb-4">${service.price}</p>` : ''}
                        
                        <div class="flex space-x-2">
                            ${!service.isDefault ? `
                                <button onclick="editService('${service.id}')" class="btn btn-secondary text-xs px-3 py-1">
                                    ‚úèÔ∏è Edit
                                </button>
                                <button onclick="deleteService('${service.id}')" class="btn text-xs px-3 py-1 bg-red-100 text-red-600 hover:bg-red-200">
                                    üóëÔ∏è Delete
                                </button>
                                <button onclick="toggleServiceStatus('${service.id}')" class="btn text-xs px-3 py-1 ${service.status === 'active' ? 'bg-yellow-100 text-yellow-600 hover:bg-yellow-200' : 'bg-green-100 text-green-600 hover:bg-green-200'}">
                                    ${service.status === 'active' ? '‚è∏Ô∏è Disable' : '‚ñ∂Ô∏è Enable'}
                                </button>
                            ` : `
                                <span class="text-xs text-gray-500 italic">Default Service</span>
                            `}
                        </div>
                    </div>
                `;
                grid.innerHTML += serviceCard;
            });
        }

        // Hero Section Management Functions
        function updateHeroPreview() {
            const title = document.getElementById('heroTitle').value || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π';
            const subtitle = document.getElementById('heroSubtitle').value || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç';
            const icon = document.getElementById('heroIcon').value || 'üíº';
            
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewSubtitle').textContent = subtitle;
            document.getElementById('previewIcon').textContent = icon;
        }

        function saveHeroSettings() {
            const settings = {
                title: document.getElementById('heroTitle').value || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π',
                subtitle: document.getElementById('heroSubtitle').value || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                icon: document.getElementById('heroIcon').value || 'üíº',
                backgroundImage: heroSettings.backgroundImage || null
            };
            
            heroSettings = settings;
            localStorage.setItem('heroSettings', JSON.stringify(heroSettings));
            updateHeroSection();
            showNotification('‚úÖ Hero section updated successfully!');
        }

        function resetHeroSettings() {
            if (confirm('Are you sure you want to reset to default settings?')) {
                heroSettings = {};
                localStorage.removeItem('heroSettings');
                
                // Reset form fields
                document.getElementById('heroTitle').value = '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π';
                document.getElementById('heroSubtitle').value = '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç';
                document.getElementById('heroIcon').value = 'üíº';
                document.getElementById('heroBackground').value = '';
                
                updateHeroPreview();
                updateHeroSection();
                showNotification('Hero section reset to default!');
            }
        }

        function updateHeroSection() {
            const heroSection = document.querySelector('main section');
            if (!heroSection) return;
            
            const title = heroSettings.title || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π';
            const subtitle = heroSettings.subtitle || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç';
            const icon = heroSettings.icon || 'üíº';
            
            // Update hero content
            const heroTitle = heroSection.querySelector('h2');
            const heroSubtitle = heroSection.querySelector('p');
            const heroIcon = heroSection.querySelector('.floating-animation .w-24');
            
            if (heroTitle) heroTitle.textContent = title;
            if (heroSubtitle) heroSubtitle.textContent = subtitle;
            if (heroIcon) heroIcon.textContent = icon;
            
            // Apply background image if set
            if (heroSettings.backgroundImage) {
                heroSection.style.backgroundImage = `url(${heroSettings.backgroundImage})`;
                heroSection.style.backgroundSize = 'cover';
                heroSection.style.backgroundPosition = 'center';
                heroSection.style.backgroundRepeat = 'no-repeat';
            } else {
                heroSection.style.backgroundImage = '';
            }
        }

        function handleHeroImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                showNotification('Image size should be less than 5MB', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                heroSettings.backgroundImage = e.target.result;
                updateHeroPreview();
                showNotification('Background image uploaded! Click Save Changes to apply.');
            };
            reader.readAsDataURL(file);
        }

        // File Upload Functions
        function handleServiceDocuments(event) {
            const files = Array.from(event.target.files);
            const uploadedFilesContainer = document.getElementById('serviceUploadedFiles');
            
            files.forEach(file => {
                if (file.size > 5 * 1024 * 1024) {
                    showNotification(`File ${file.name} is too large. Max 5MB allowed.`, 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const fileData = {
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: e.target.result,
                        uploadedAt: new Date().toISOString()
                    };
                    
                    uploadedDocuments.push(fileData);
                    
                    // Create file preview
                    const filePreview = document.createElement('div');
                    filePreview.className = 'flex items-center justify-between bg-gray-100 p-3 rounded-lg';
                    filePreview.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div class="text-2xl">
                                ${file.type.includes('pdf') ? 'üìÑ' : 'üñºÔ∏è'}
                            </div>
                            <div>
                                <p class="font-medium text-sm">${file.name}</p>
                                <p class="text-xs text-gray-500">${(file.size / 1024).toFixed(1)} KB</p>
                            </div>
                        </div>
                        <button onclick="removeUploadedFile('${file.name}')" class="text-red-500 hover:text-red-700">
                            ‚ùå
                        </button>
                    `;
                    
                    uploadedFilesContainer.appendChild(filePreview);
                };
                reader.readAsDataURL(file);
            });
            
            // Clear the input
            event.target.value = '';
        }

        function removeUploadedFile(fileName) {
            uploadedDocuments = uploadedDocuments.filter(file => file.name !== fileName);
            
            // Remove from UI
            const container = document.getElementById('serviceUploadedFiles');
            const fileElements = container.querySelectorAll('div');
            fileElements.forEach(element => {
                if (element.textContent.includes(fileName)) {
                    element.remove();
                }
            });
        }

        function handleServiceImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                showNotification('Image size should be less than 5MB', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                showNotification('Service image uploaded successfully!');
                // Store image data for the service
                // This would be saved when the service is saved
            };
            reader.readAsDataURL(file);
        }

        // Load homepage services
        function loadHomepageServices() {
            const homepageGrid = document.getElementById('servicesGridHomepage');
            if (!homepageGrid) return;
            
            homepageGrid.innerHTML = '';
            
            // Default services
            const defaultServices = [
                { 
                    id: 'aadhaar', 
                    name: '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', 
                    icon: 'üÜî', 
                    price: '‚Çπ50-200', 
                    status: 'active',
                    options: ['‡§®‡§Ø‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°', '‡§Ü‡§ß‡§æ‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü', '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≤‡§ø‡§Ç‡§ï', '‡§Ü‡§ß‡§æ‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°']
                },
                { 
                    id: 'pan', 
                    name: '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', 
                    icon: 'üí≥', 
                    price: '‚Çπ100-300', 
                    status: 'active',
                    options: ['‡§®‡§Ø‡§æ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•Å‡§ß‡§æ‡§∞', '‡§°‡•Å‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§ü ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', '‡§™‡•à‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï']
                },
                { 
                    id: 'voter', 
                    name: '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', 
                    icon: 'üó≥Ô∏è', 
                    price: '‚Çπ80-250', 
                    status: 'active',
                    options: ['‡§®‡§à ‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä', '‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞', '‡§™‡§§‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ', '‡§°‡•Å‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§ü ‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä']
                },
                { 
                    id: 'ration', 
                    name: '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', 
                    icon: 'üçö', 
                    price: '‚Çπ100-400', 
                    status: 'active',
                    options: ['‡§®‡§Ø‡§æ ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§°', '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•Å‡§ß‡§æ‡§∞', '‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡§®‡§æ/‡§π‡§ü‡§æ‡§®‡§æ', '‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞']
                },
                { 
                    id: 'income', 
                    name: '‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', 
                    icon: 'üìÑ', 
                    price: '‚Çπ150-500', 
                    status: 'active',
                    options: ['‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', '‡§ú‡§æ‡§§‡§ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', '‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞', '‡§ö‡§∞‡§ø‡§§‡•ç‡§∞ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞']
                },
                { 
                    id: 'other', 
                    name: '‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', 
                    icon: '‚öôÔ∏è', 
                    price: '‚Çπ50-1000', 
                    status: 'active',
                    options: ['‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§ñ‡•ã‡§≤‡§®‡§æ', '‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®', '‡§ó‡•à‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§®', '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∞‡§ø‡§ö‡§æ‡§∞‡•ç‡§ú']
                }
            ];
            
            // Combine default and custom services, only show active ones
            const allServices = [...defaultServices, ...customServices.filter(s => s.status === 'active')];
            
            allServices.forEach(service => {
                if (service.status !== 'active') return;
                
                const serviceCard = `
                    <div class="service-card card-hover" onclick="checkLoginAndOpenService('${service.id}')">
                        <div class="service-icon">
                            ${service.icon}
                        </div>
                        <h3 class="text-lg font-bold text-center mb-2">${service.name}</h3>
                        <ul class="text-gray-600 space-y-2">
                            ${service.options ? service.options.slice(0, 4).map(option => `<li>‚Ä¢ ${option}</li>`).join('') : ''}
                        </ul>
                        <div class="text-center mt-4">
                            ${service.price ? `<span class="text-2xl font-bold text-green-600">${service.price}</span>` : ''}
                            <div class="mt-2 text-xs text-orange-600 font-medium">
                                üîí Login Required
                            </div>
                        </div>
                    </div>
                `;
                homepageGrid.innerHTML += serviceCard;
            });
        }

        // Website customization functions
        let websiteSettings = JSON.parse(localStorage.getItem('websiteSettings') || '{}');

        function saveWebsiteSettings() {
            const settings = {
                heroTitle: document.getElementById('heroTitle').value || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π',
                heroSubtitle: document.getElementById('heroSubtitle').value || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                heroIcon: document.getElementById('heroIcon').value || 'üíº',
                storeName: document.getElementById('storeName').value || 'Mushtaq Store',
                storeTagline: document.getElementById('storeTagline').value || 'Digital Services & Solutions',
                storeIcon: document.getElementById('storeIcon').value || 'üè™',
                contactPhone: document.getElementById('contactPhone').value || '+91 93550 22066',
                contactAddress: document.getElementById('contactAddress').value || 'Mushtaq Store, Main Market',
                backgroundImage: websiteSettings.backgroundImage || null
            };
            
            websiteSettings = settings;
            localStorage.setItem('websiteSettings', JSON.stringify(websiteSettings));
            
            // Apply changes to current website
            applyWebsiteSettings();
            
            // Update preview
            refreshPreview();
            
            showNotification('‚úÖ Website settings saved successfully!');
        }

        function resetWebsiteSettings() {
            if (confirm('Are you sure you want to reset all website settings to default?')) {
                websiteSettings = {};
                localStorage.removeItem('websiteSettings');
                
                // Reset form fields
                document.getElementById('heroTitle').value = '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π';
                document.getElementById('heroSubtitle').value = '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç';
                document.getElementById('heroIcon').value = 'üíº';
                document.getElementById('storeName').value = 'Mushtaq Store';
                document.getElementById('storeTagline').value = 'Digital Services & Solutions';
                document.getElementById('storeIcon').value = 'üè™';
                document.getElementById('contactPhone').value = '+91 93550 22066';
                document.getElementById('contactAddress').value = 'Mushtaq Store, Main Market';
                document.getElementById('heroBackground').value = '';
                
                applyWebsiteSettings();
                refreshPreview();
                showNotification('Website reset to default settings!');
            }
        }

        function applyWebsiteSettings() {
            // Update hero section
            const heroTitle = document.querySelector('main section h2');
            const heroSubtitle = document.querySelector('main section p');
            const heroIcon = document.querySelector('.floating-animation .w-24');
            
            if (heroTitle) heroTitle.textContent = websiteSettings.heroTitle || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π';
            if (heroSubtitle) heroSubtitle.textContent = websiteSettings.heroSubtitle || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç';
            if (heroIcon) heroIcon.textContent = websiteSettings.heroIcon || 'üíº';
            
            // Update header
            const storeName = document.querySelector('header h1');
            const storeTagline = document.querySelector('header p');
            const storeIcon = document.querySelector('header .w-12 span');
            
            if (storeName) storeName.textContent = websiteSettings.storeName || 'Mushtaq Store';
            if (storeTagline) storeTagline.textContent = websiteSettings.storeTagline || 'Digital Services & Solutions';
            if (storeIcon) storeIcon.textContent = websiteSettings.storeIcon || 'üè™';
            
            // Update contact section
            const contactPhone = document.querySelector('section:last-child .grid div:first-child p');
            const contactAddress = document.querySelector('section:last-child .grid div:last-child p');
            
            if (contactPhone) contactPhone.textContent = websiteSettings.contactPhone || '+91 93550 22066';
            if (contactAddress) contactAddress.textContent = websiteSettings.contactAddress || 'Mushtaq Store, Main Market';
        }

        function refreshPreview() {
            const iframe = document.getElementById('websitePreview');
            if (!iframe) return;
            
            try {
                // Get current settings safely
                const settings = {
                    heroTitle: document.getElementById('heroTitle')?.value || '‡§∏‡§≠‡•Ä ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§è‡§ï ‡§ú‡§ó‡§π',
                    heroSubtitle: document.getElementById('heroSubtitle')?.value || '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§≤‡•á‡§ï‡§∞ ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§ï, ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ò‡§∞ ‡§¨‡•à‡§†‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                    heroIcon: document.getElementById('heroIcon')?.value || 'üíº',
                    storeName: document.getElementById('storeName')?.value || 'Mushtaq Store',
                    storeTagline: document.getElementById('storeTagline')?.value || 'Digital Services & Solutions',
                    storeIcon: document.getElementById('storeIcon')?.value || 'üè™',
                    contactPhone: document.getElementById('contactPhone')?.value || '+91 93550 22066',
                    contactAddress: document.getElementById('contactAddress')?.value || 'Mushtaq Store, Main Market'
                };
                
                // Create simple preview content
                const previewContent = `
                    <div style="font-family: Arial, sans-serif; padding: 20px; background: #f3f4f6;">
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="font-size: 24px;">${settings.storeIcon}</div>
                                <div>
                                    <h1 style="margin: 0; font-size: 24px;">${settings.storeName}</h1>
                                    <p style="margin: 5px 0 0 0; opacity: 0.9;">${settings.storeTagline}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 40px 0;">
                            <div style="font-size: 48px; margin-bottom: 20px;">${settings.heroIcon}</div>
                            <h2 style="font-size: 28px; margin-bottom: 15px; color: #1f2937;">${settings.heroTitle}</h2>
                            <p style="font-size: 16px; color: #6b7280; max-width: 600px; margin: 0 auto;">${settings.heroSubtitle}</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 40px 0;">
                            <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üÜî</div>
                                <h3 style="margin: 0 0 10px 0;">‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</h3>
                                <p style="color: #16a34a; font-weight: bold;">‚Çπ50-200</p>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üí≥</div>
                                <h3 style="margin: 0 0 10px 0;">‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</h3>
                                <p style="color: #16a34a; font-weight: bold;">‚Çπ100-300</p>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üó≥Ô∏è</div>
                                <h3 style="margin: 0 0 10px 0;">‡§µ‡•ã‡§ü‡§∞ ‡§Ü‡§à‡§°‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</h3>
                                <p style="color: #16a34a; font-weight: bold;">‚Çπ80-250</p>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #2563eb, #7c3aed); color: white; padding: 30px; border-radius: 12px; text-align: center;">
                            <h3 style="margin: 0 0 20px 0; font-size: 24px;">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div>
                                    <h4 style="margin: 0 0 5px 0;">üìû ‡§´‡•ã‡§®</h4>
                                    <p style="margin: 0;">${settings.contactPhone}</p>
                                </div>
                                <div>
                                    <h4 style="margin: 0 0 5px 0;">üìç ‡§™‡§§‡§æ</h4>
                                    <p style="margin: 0;">${settings.contactAddress}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                iframe.srcdoc = previewContent;
                
            } catch (error) {
                console.error('Preview error:', error);
                // Fallback preview
                iframe.srcdoc = '<div style="padding: 20px; text-align: center; font-family: Arial;">Preview Loading...</div>';
            }
        }

        // Simplified preview function - no complex HTML generation

        function previewWebsite() {
            // Open current website in a new tab for full preview
            const currentHTML = document.documentElement.outerHTML;
            const blob = new Blob([currentHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            window.open(url, '_blank');
            
            // Clean up the URL after a delay
            setTimeout(() => URL.revokeObjectURL(url), 10000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-login user if they were previously logged in
            if (currentUser) {
                isUserLoggedIn = true;
                // Update header to show user is logged in
                updateHeaderForLoggedInUser();
            }
            
            // Load saved Google Sheets config
            const savedConfig = localStorage.getItem('googleSheetsConfig');
            if (savedConfig) {
                const config = JSON.parse(savedConfig);
                GOOGLE_SHEETS_CONFIG.scriptUrl = config.scriptUrl;
                GOOGLE_SHEETS_CONFIG.sheetId = config.sheetId;
                
                document.getElementById('googleScriptUrl').value = config.scriptUrl;
                document.getElementById('googleSheetId').value = config.sheetId;
            }
            
            // Load homepage services
            loadHomepageServices();
            
            // Apply saved website settings
            applyWebsiteSettings();
            
            // Load services grid when admin panel is opened
            setTimeout(() => {
                loadServicesGrid();
            }, 500);
            
            // Initialize preview functionality safely
            setTimeout(() => {
                try {
                    const heroTitle = document.getElementById('heroTitle');
                    const heroSubtitle = document.getElementById('heroSubtitle');
                    const heroIcon = document.getElementById('heroIcon');
                    const storeName = document.getElementById('storeName');
                    const storeTagline = document.getElementById('storeTagline');
                    const storeIcon = document.getElementById('storeIcon');
                    const contactPhone = document.getElementById('contactPhone');
                    const contactAddress = document.getElementById('contactAddress');
                    
                    if (heroTitle) heroTitle.addEventListener('input', refreshPreview);
                    if (heroSubtitle) heroSubtitle.addEventListener('input', refreshPreview);
                    if (heroIcon) heroIcon.addEventListener('change', refreshPreview);
                    if (storeName) storeName.addEventListener('input', refreshPreview);
                    if (storeTagline) storeTagline.addEventListener('input', refreshPreview);
                    if (storeIcon) storeIcon.addEventListener('change', refreshPreview);
                    if (contactPhone) contactPhone.addEventListener('input', refreshPreview);
                    if (contactAddress) contactAddress.addEventListener('input', refreshPreview);
                } catch (error) {
                    console.log('Preview initialization skipped - admin panel not loaded yet');
                }
            }, 2000);
            
            // Add smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
            
            // Add entrance animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('slide-in');
                    }
                });
            });
            
            document.querySelectorAll('.service-card').forEach(card => {
                observer.observe(card);
            });
        });

        // Close modals when clicking outside
        document.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal.show').forEach(modal => {
                    modal.classList.remove('show');
                });
            }
        }); 
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9832d951d1db5522',t:'MTc1ODU1NTA4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
